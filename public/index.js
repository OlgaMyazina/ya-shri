!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=49)}({49:function(t,e,n){"use strict";n.r(e);let o={};const i={leftMin:-1e3,left:0,leftMax:820,zoomMin:100,zoom:100,zoomMax:300,brightnessMin:.2,brightness:1,brightnessMax:4};let r=null;function c(){document.querySelector(".camera").setAttribute("touch-action","none");const t=l();t.setAttribute("touch-action","none");const e=a();e.style.opacity="1";const n=(t.offsetWidth-e.offsetWidth)/2-20;e.style.left=`${n}px`,t&&function(t){t.addEventListener("pointerdown",s),t.addEventListener("pointermove",f),t.addEventListener("pointerup",p),t.addEventListener("pointercancel",p),t.addEventListener("pointerout",p),t.addEventListener("pointerleave",p),t.addEventListener("dblclick",g),t.addEventListener("dragstart",t=>{t.preventDefault()})}(t)}function l(){return document.querySelector(".cam")}function a(){return document.querySelector(".cam-slider")}function s(t){o[t.pointerId]=t,r||(r={startZoom:null,startDistance:null,startBrightness:null,startAngle:null,angleDiff:null,type:"move"})}const u=(t,e)=>{const{clientX:n,clientY:o}=t,{clientX:i,clientY:r}=e;return Math.sqrt(Math.pow(n-i,2)+Math.pow(o-r,2))},d=(t,e)=>{const{clientX:n,clientY:o}=t,{clientX:i,clientY:r}=e,c=Math.atan2(i-n,r-o);return 360-(180+Math.round(180*c/Math.PI))};document.querySelector(".feedback__unit_left"),document.querySelector(".feedback__unit_zoom"),document.querySelector(".feedback__unit_brightness");function f(t){const e=l(),n=Object.keys(o).length;if(0===n||!r)return;let c=0,s=0,f=0;if(1!==n||"move"!==r.type||o.fake){if(2===n){o[t.pointerId]=t;const n=Object.keys(o).map(t=>o[t]);n[0]&&n[1]&&(s=u(n[0],n[1]),f=d(n[0],n[1])),r.startDistance||(r.startZoom=i.zoom,r.startDistance=s,r.startBrightness=i.brightness,r.startAngle=f,r.angleDiff=0,r.type=null);const c=s-r.startDistance;let l=0;const a=10,p=8;if(r.startAngle&&(l=f-r.startAngle),!r.type){if(Math.abs(c)<a&&Math.abs(l)<p)return;Math.abs(c)>a?r.type="zoom":r.type="rotate"}if("zoom"===r.type){const{zoomMin:t,zoomMax:n}=i;let o=t;o=r.startZoom?r.startZoom+c:t+c,o=c<0?Math.max(o,t):Math.min(o,n),i.zoom=o,e.style.backgroundSize=`${o}%`}if("rotate"===r.type){const{brightnessMin:t,brightnessMax:n}=i;if(Math.abs(r.angleDiff?l-r.angleDiff:l)>n)return r.startBrightness=i.brightness,r.startAngle=f,void(r.angleDiff=t);const o=50;r.angleDiff=l;let c=0;r.startBrightness&&(c=r.startBrightness+l/o),c=l<0?Math.max(c,t):Math.min(c,n),i.brightness=c,e.style.filter=`brightness(${c})`}}}else{const n=o[t.pointerId];(function(t,e){const{leftMin:n,leftMax:o}=i,r=a(),c=((e.offsetWidth-r.offsetWidth)/2-20)/1e3;if(i.left+=t,i.left<n)i.left=n;else if(i.left>o)i.left=o;else if(r.style.left){const e=+r.style.left.slice(0,-2)-t*c;r.style.left=`${e}px`}e.style.backgroundPositionX=`${i.left}px`})(c=n?t.clientX-n.clientX:t.clientX,e),o[t.pointerId]=t}}function p(t){r=null,delete o[t.pointerId]}const m=document.querySelector(".fake-pointer");function g(t){if(o.fake)delete o.fake,m.style.left="0",m.style.top="0",m.classList.remove("active");else{o.fake=t;const e=m.offsetWidth;m.classList.add("active"),m.setAttribute("style",`left:${i.left+t.pageX-e/2}px; top: ${t.pageY-e/2}px`)}}function y(t){const e=document.querySelector(".content");e&&(t.forEach(t=>{const n=function(t){const e=document.querySelector(".template").content.cloneNode(!0);e.querySelector(".tile").classList.add(`${t.size}`),v(e,".type-tile","type",t.type),h(e,".title-tile",t.title),h(e,".source-tile",t.source),"critical"===t.type?b(e,".icon-tile",`url(img/${t.icon}-white.svg)`):b(e,".icon-tile",`url(img/${t.icon}.svg)`),h(e,".time-tile",t.time),t.description&&h(e,".description-tile",t.description);const n=t.data;if(n){const t=e.querySelector(".info-tile");if(t.classList.add("visable"),function(t){return void 0!==t.track}(n)){const t=document.querySelector(".template-audio").content.cloneNode(!0);!function(t,e){null!==t&&(b(t,".cover",`url("${e.albumcover}")`),h(t,".artist",`${e.artist}-${e.track.name}`),h(t,".length",e.track.length),v(t,".track","max",e.track.length),v(t,".track","value",`${e.track.length}/2`),v(t,".volume-range","value",e.volume.toString()),h(t,".volume",`${e.volume}%`))}(t,n);const o=e.querySelector(".data-tile");o.classList.add("data-audio"),o.appendChild(t)}if(function(t){return void 0!==t.type}(n)){const t=document.querySelector(".template-graph").content.cloneNode(!0);!function(t,e){if(null!==t){const e=t.querySelector(".graph");e.style.background=" url('../../img/Richdata.png') no-repeat",e.style.backgroundImage="-webkit-image-set( url('../../img/Richdata.png') 1x, url('../../img/Richdata@2x.png') 2x, url('../../images/Richdata@3x.png') 3x )",e.style.backgroundPosition="center bottom"}}(t);const n=e.querySelector(".data-tile");n.appendChild(t)}if(function(t){return void 0!==t.image}(n)){const t=document.querySelector(".template-image").content.cloneNode(!0),n=function(){const t=document.createElement("div");t.style.background="url('./img/Bitmap.png')",t.style.background="-webkit-image-set( url('../../img/Bitmap.png') 1x, url('../../img/Bitmap2x.png') 2x , url('img/Bitmap3x.png') 3x",t.style.backgroundPosition="50% 50%",t.classList.add("cam");const e=document.createElement("div");return e.classList.add("cam-slider"),t.appendChild(e),t}(),o=function(){const t=document.createElement("div");t.classList.add("control-labels");const e=document.createElement("div");e.classList.add("control-zoom");const n=document.createElement("div");return n.classList.add("control-bright"),e.innerText="Приближение: 78%",n.innerText="Яркость: 50%",t.appendChild(e),t.appendChild(n),t}();t.appendChild(n);const i=e.querySelector(".data-tile");i.classList.add("camera"),i.appendChild(t),i.appendChild(o)}if(function(t){return void 0!==t.buttons}(n)){const t=document.querySelector(".template-buttons").content.cloneNode(!0);n.buttons.forEach(e=>{const n=function(t){const e=document.createElement("div");return e.classList.add("data-button"),e.innerText=t,e}(e),o=t.querySelector(".buttons");o&&o.appendChild(n)});const o=e.querySelector(".data-tile");o.appendChild(t)}}return e}(t);e.appendChild(n)}),c())}function h(t,e,n){const o=t.querySelector(e);return o&&(o.innerText=n),o}function b(t,e,n){const o=t.querySelector(e);o&&(o.style.backgroundImage=n)}function v(t,e,n,o){const i=t.querySelector(e);i&&i.setAttribute(n,o)}fetch("data/events.json").then(t=>t.json()).then(t=>y(t.events))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hvbWUvY29tcG9uZW50cy90b3VjaEVudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ob21lL2NvbXBvbmVudHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY3VycmVudFBvaW50ZXJFdmVudHMiLCJpbWFnZVN0YXRlIiwibGVmdE1pbiIsImxlZnQiLCJsZWZ0TWF4Iiwiem9vbU1pbiIsInpvb20iLCJ6b29tTWF4IiwiYnJpZ2h0bmVzc01pbiIsImJyaWdodG5lc3MiLCJicmlnaHRuZXNzTWF4IiwiZ2VzdHVyZSIsInRvdWNoRXZlbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJlbGVtZW50IiwiZ2V0Q2FtRWxlbSIsImNhbVNsaWRlciIsImdldENhbVNsaWRlciIsInN0eWxlIiwib3BhY2l0eSIsInN0YXJ0U2xpZGVyUG9zaXRpb24iLCJvZmZzZXRXaWR0aCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBvaW50ZXJEb3duSGFuZGxlciIsInBvaW50ZXJNb3ZlSGFuZGxlciIsInBvaW50ZXJVcEhhbmRsZXIiLCJmYWtlUG9pbnRlckhhbmRsZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiaW5pdCIsInBvaW50ZXJJZCIsInN0YXJ0Wm9vbSIsInN0YXJ0RGlzdGFuY2UiLCJzdGFydEJyaWdodG5lc3MiLCJzdGFydEFuZ2xlIiwiYW5nbGVEaWZmIiwidHlwZSIsImdldERpc3RhbmNlIiwiZTEiLCJlMiIsImNsaWVudFgiLCJ4MSIsImNsaWVudFkiLCJ5MSIsIngyIiwieTIiLCJNYXRoIiwic3FydCIsInBvdyIsImdldEFuZ2xlIiwiYXRhbjIiLCJyb3VuZCIsIlBJIiwicG9pbnRlcnNDb3VudCIsImtleXMiLCJsZW5ndGgiLCJkeCIsImRpc3RhbmNlIiwiYW5nbGUiLCJmYWtlIiwiZXZlbnRzIiwibWFwIiwiZGlmZiIsImRpZmZFeGFtcGxlIiwiYW5nbGVEaWZmRXhhbXBsZSIsImFicyIsIm1heCIsIm1pbiIsImJhY2tncm91bmRTaXplIiwiayIsImZpbHRlciIsInByZXZpb3VzRXZlbnQiLCJrb2VmIiwidGVzdCIsInNsaWNlIiwiYmFja2dyb3VuZFBvc2l0aW9uWCIsInNldExlZnQiLCJmYWtlUG9pbnRlciIsInRvcCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIndpZHRoIiwiYWRkIiwicGFnZVgiLCJwYWdlWSIsInJlbmRlciIsImNvbnRlbnQiLCJmb3JFYWNoIiwiZXZlbnRFbGVtZW50IiwidGlsZSIsImNsb25lTm9kZSIsInNpemUiLCJzZWFyY2hBbmRTZXRBdHRyIiwic2VhcmNoRWxlbUFuZElubmVyVGV4dCIsInRpdGxlIiwic291cmNlIiwic2VhcmNoRWxlbUFuZEJnSW1hZ2UiLCJpY29uIiwidGltZSIsImRlc2NyaXB0aW9uIiwiZGF0YSIsInRpbGVJbmZvIiwiZXZlbnREYXRhIiwidHJhY2siLCJpc0V2ZW50RGF0YUF1ZGlvIiwiYXVkaW8iLCJhbGJ1bWNvdmVyIiwiYXJ0aXN0Iiwidm9sdW1lIiwidG9TdHJpbmciLCJmaWxsVGVtcGxhdGVBdWRpbyIsImRhdGFUaWxlIiwiYXBwZW5kQ2hpbGQiLCJpc0V2ZW50RGF0YUdyYXBoIiwiZ3JhcGgiLCJncmFwaE5vZGUiLCJiYWNrZ3JvdW5kIiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiZmlsbFRlbXBsYXRlR3JhcGgiLCJpbWFnZSIsImlzRXZlbnREYXRhSW1hZ2UiLCJpbWdEaXYiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlSW1hZ2VFbGVtZW50IiwibGFiZWxzIiwiY29udHJvbFpvb20iLCJjb250cm9sQnJpZ2h0IiwiaW5uZXJUZXh0IiwiY3JlYXRlTGFiZWxDb250cm9sIiwiYnV0dG9ucyIsImlzRXZlbnREYXRhQnV0dG9ucyIsImJ0bnMiLCJ0ZXh0QnRuIiwiYnV0dG9uIiwiY3JlYXRlQnV0dG9uc0VsZW1lbnQiLCJjcmVhdGVFdmVudEVsZW1lbnQiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJzZWxlY3RvciIsInVybCIsImF0dHJOYW1lIiwiYXR0clZhbHVlIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFB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QyxFQUFpQjZDLEVBQWlDQyxFQUFrQkUsRUFBa0JDLEdBQzdGLE1BQU1oSSxFQUFvQzRILEVBQWdCOUgsY0FBYytILEdBQ3BFN0gsR0FDRkEsRUFBUUQsYUFBYWdJLEVBQVVDLEdDbktuQ0MsTUFBTSxvQkFDSEMsS0FBS0MsR0FBT0EsRUFBSUMsUUFDaEJGLEtBQUszQyxHQUFRZixFQUFvQmUsRUFBS3hDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQ5KTtcbiIsIi8q0KHQtdC90YHQvtGA0L3Ri9C5INCy0LLQvtC0ICovXG5cbi8vINCh0Y7QtNCwINCx0YPQtNC10Lwg0LfQsNC/0LjRgdGL0LLQsNGC0Ywg0YHQvtCx0YvRgtC40Y9cbmxldCBjdXJyZW50UG9pbnRlckV2ZW50czogUG9pbnRlckV2ZW50U2hhcmUgPSB7fTtcbi8vINCh0L7RgdGC0L7Rj9C90LjQtSDQvdCw0YjQtdC5INC60LDRgNGC0LjQvdC60LhcbmludGVyZmFjZSBpbWFnZVN0YXRlSW50ZXJmYWNlIHtcbiAgbGVmdE1pbjogbnVtYmVyO1xuICBsZWZ0OiBudW1iZXI7XG4gIGxlZnRNYXg6IG51bWJlcjtcbiAgem9vbU1pbjogbnVtYmVyO1xuICB6b29tOiBudW1iZXI7XG4gIHpvb21NYXg6IG51bWJlcjtcbiAgYnJpZ2h0bmVzc01pbjogbnVtYmVyO1xuICBicmlnaHRuZXNzOiBudW1iZXI7XG4gIGJyaWdodG5lc3NNYXg6IG51bWJlcjtcbn1cbmludGVyZmFjZSBQb2ludGVyRXZlbnRTaGFyZSB7XG4gIFtrZXk6IHN0cmluZ106IFBvaW50ZXJFdmVudCB8IE1vdXNlRXZlbnQgfCB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IGltYWdlU3RhdGU6IGltYWdlU3RhdGVJbnRlcmZhY2UgPSB7XG4gIGxlZnRNaW46IC0xMDAwLFxuICBsZWZ0OiAwLFxuICBsZWZ0TWF4OiA4MjAsXG4gIHpvb21NaW46IDEwMCxcbiAgem9vbTogMTAwLFxuICB6b29tTWF4OiAzMDAsXG4gIGJyaWdodG5lc3NNaW46IDAuMixcbiAgYnJpZ2h0bmVzczogMSxcbiAgYnJpZ2h0bmVzc01heDogNFxufTtcbmludGVyZmFjZSBnZXN0dXJlU3RhdGVJbnRlcmZhY2Uge1xuICBzdGFydFpvb206IG51bWJlciB8IG51bGw7XG4gIHN0YXJ0RGlzdGFuY2U6IG51bWJlciB8IG51bGw7XG4gIHN0YXJ0QnJpZ2h0bmVzczogbnVtYmVyIHwgbnVsbDtcbiAgc3RhcnRBbmdsZTogbnVtYmVyIHwgbnVsbDtcbiAgYW5nbGVEaWZmOiBudW1iZXIgfCBudWxsO1xuICB0eXBlOiBzdHJpbmcgfCBudWxsO1xufVxuaW50ZXJmYWNlIGdlc3R1cmVJbnRlcmZhY2Uge1xuICB0eXBlOiBzdHJpbmcgfCBudWxsO1xufVxuXG4vLyDQntC/0LjRgdCw0L3QuNC1INGC0LXQutGD0YnQtdCz0L4g0LbQtdGB0YLQsFxubGV0IGdlc3R1cmU6IGdlc3R1cmVTdGF0ZUludGVyZmFjZSB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gdG91Y2hFdmVudCgpIHtcbiAgLy/Qn9C+0LvRg9GH0LDQtdC8INGN0LvQtdC80LXQvdGCIC0g0LrQsNC80LXRgNGLIC0g0LrQsNGA0YLQuNC90LrQuCwg0YfRgtC+0LHRiyDQstGA0LDRidCw0YLRjFxuICBjb25zdCBjYW1lcmEgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYScpO1xuICBjYW1lcmEuc2V0QXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nLCAnbm9uZScpO1xuICBjb25zdCBlbGVtZW50ID0gZ2V0Q2FtRWxlbSgpO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndG91Y2gtYWN0aW9uJywgJ25vbmUnKTtcbiAgY29uc3QgY2FtU2xpZGVyID0gZ2V0Q2FtU2xpZGVyKCk7XG4gIGNhbVNsaWRlci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICBjb25zdCBwYWRkaW5nID0gMjA7XG4gIGNvbnN0IHN0YXJ0U2xpZGVyUG9zaXRpb24gPSAoZWxlbWVudC5vZmZzZXRXaWR0aCAtIGNhbVNsaWRlci5vZmZzZXRXaWR0aCkgLyAyIC0gcGFkZGluZztcbiAgY2FtU2xpZGVyLnN0eWxlLmxlZnQgPSBgJHtzdGFydFNsaWRlclBvc2l0aW9ufXB4YDtcbiAgaWYgKGVsZW1lbnQpIGluaXQoZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGluaXQoZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gIC8v0L3QsNCy0LXRiNC40LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDRgdC+0LHRi9GC0LjRj1xuXG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgcG9pbnRlckRvd25IYW5kbGVyKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBwb2ludGVyTW92ZUhhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBwb2ludGVyVXBIYW5kbGVyKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHBvaW50ZXJVcEhhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyb3V0JywgcG9pbnRlclVwSGFuZGxlcik7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsIHBvaW50ZXJVcEhhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZha2VQb2ludGVySGFuZGxlcik7XG4gIC8vINCX0LDQv9GA0LXRidCw0LXRgiDRgtCw0YHQutCw0YLRjCDQutCw0YDRgtC40L3QutGDINC80YvRiNC60L7QuVxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBldmVudCA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldENhbUVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW0nKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldEJyaWdodEVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sLWJyaWdodCcpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gZ2V0Wm9vbUVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sLXpvb20nKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldENhbVNsaWRlcigpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGNhbVNsaWRlciA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtLXNsaWRlcicpO1xuICByZXR1cm4gY2FtU2xpZGVyO1xufVxuXG5mdW5jdGlvbiBwb2ludGVyRG93bkhhbmRsZXIoZXZlbnQ6IFBvaW50ZXJFdmVudCkge1xuICBjdXJyZW50UG9pbnRlckV2ZW50c1tldmVudC5wb2ludGVySWRdID0gZXZlbnQ7XG4gIGlmICghZ2VzdHVyZSkge1xuICAgIGdlc3R1cmUgPSB7XG4gICAgICBzdGFydFpvb206IG51bGwsXG4gICAgICBzdGFydERpc3RhbmNlOiBudWxsLFxuICAgICAgc3RhcnRCcmlnaHRuZXNzOiBudWxsLFxuICAgICAgc3RhcnRBbmdsZTogbnVsbCxcbiAgICAgIGFuZ2xlRGlmZjogbnVsbCxcbiAgICAgIHR5cGU6ICdtb3ZlJ1xuICAgIH07XG4gIH1cbn1cbmNvbnN0IGdldERpc3RhbmNlID0gKGUxOiBQb2ludGVyRXZlbnQsIGUyOiBQb2ludGVyRXZlbnQpOiBudW1iZXIgPT4ge1xuICBjb25zdCB7IGNsaWVudFg6IHgxLCBjbGllbnRZOiB5MSB9ID0gZTE7XG4gIGNvbnN0IHsgY2xpZW50WDogeDIsIGNsaWVudFk6IHkyIH0gPSBlMjtcbiAgcmV0dXJuIE1hdGguc3FydCgoeDEgLSB4MikgKiogMiArICh5MSAtIHkyKSAqKiAyKTtcbn07XG5jb25zdCBnZXRBbmdsZSA9IChlMTogUG9pbnRlckV2ZW50LCBlMjogUG9pbnRlckV2ZW50KTogbnVtYmVyID0+IHtcbiAgY29uc3QgeyBjbGllbnRYOiB4MSwgY2xpZW50WTogeTEgfSA9IGUxO1xuICBjb25zdCB7IGNsaWVudFg6IHgyLCBjbGllbnRZOiB5MiB9ID0gZTI7XG4gIGNvbnN0IHIgPSBNYXRoLmF0YW4yKHgyIC0geDEsIHkyIC0geTEpO1xuICByZXR1cm4gMzYwIC0gKDE4MCArIE1hdGgucm91bmQoKHIgKiAxODApIC8gTWF0aC5QSSkpO1xufTtcbmNvbnN0IGZlZWRiYWNrTm9kZXMgPSB7XG4gIGxlZnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFja19fdW5pdF9sZWZ0JyksXG4gIHpvb206IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFja19fdW5pdF96b29tJyksXG4gIGJyaWdodG5lc3M6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFja19fdW5pdF9icmlnaHRuZXNzJylcbn07XG5cbmZ1bmN0aW9uIHNldExlZnQoZHg6IG51bWJlciwgZWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgY29uc3QgeyBsZWZ0TWluLCBsZWZ0TWF4IH0gPSBpbWFnZVN0YXRlO1xuICBjb25zdCBjYW1TbGlkZXI6IEhUTUxEaXZFbGVtZW50ID0gZ2V0Q2FtU2xpZGVyKCk7XG4gIGNvbnN0IHBhZGRpbmcgPSAyMDtcbiAgLy/QutC+0Y3RhNGE0LjRhtC40LXQvdGCXG4gIGNvbnN0IGtvZWY6IG51bWJlciA9ICgoZWxlbWVudC5vZmZzZXRXaWR0aCAtIGNhbVNsaWRlci5vZmZzZXRXaWR0aCkgLyAyIC0gcGFkZGluZykgLyAxMDAwO1xuXG4gIGltYWdlU3RhdGUubGVmdCArPSBkeDtcblxuICBpZiAoaW1hZ2VTdGF0ZS5sZWZ0IDwgbGVmdE1pbikge1xuICAgIGltYWdlU3RhdGUubGVmdCA9IGxlZnRNaW47XG4gIH0gZWxzZSBpZiAoaW1hZ2VTdGF0ZS5sZWZ0ID4gbGVmdE1heCkge1xuICAgIGltYWdlU3RhdGUubGVmdCA9IGxlZnRNYXg7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGNhbVNsaWRlci5zdHlsZS5sZWZ0KSB7XG4gICAgICBjb25zdCB0ZXN0ID0gK2NhbVNsaWRlci5zdHlsZS5sZWZ0LnNsaWNlKDAsIC0yKSAtIGR4ICoga29lZjtcbiAgICAgIGNhbVNsaWRlci5zdHlsZS5sZWZ0ID0gYCR7dGVzdH1weGA7XG4gICAgfVxuICB9XG4gIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWCA9IGAke2ltYWdlU3RhdGUubGVmdH1weGA7XG59XG5cbmZ1bmN0aW9uIHBvaW50ZXJNb3ZlSGFuZGxlcihldmVudDogUG9pbnRlckV2ZW50KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZXRDYW1FbGVtKCk7XG4gIGNvbnN0IHBvaW50ZXJzQ291bnQgPSBPYmplY3Qua2V5cyhjdXJyZW50UG9pbnRlckV2ZW50cykubGVuZ3RoO1xuICBpZiAocG9pbnRlcnNDb3VudCA9PT0gMCB8fCAhZ2VzdHVyZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZHg6IG51bWJlciA9IDAsXG4gICAgZGlzdGFuY2U6IG51bWJlciA9IDAsXG4gICAgYW5nbGU6IG51bWJlciA9IDA7XG5cbiAgaWYgKHBvaW50ZXJzQ291bnQgPT09IDEgJiYgZ2VzdHVyZS50eXBlID09PSAnbW92ZScgJiYgIWN1cnJlbnRQb2ludGVyRXZlbnRzLmZha2UpIHtcbiAgICBjb25zdCBwcmV2aW91c0V2ZW50ID0gY3VycmVudFBvaW50ZXJFdmVudHNbZXZlbnQucG9pbnRlcklkXTtcbiAgICBwcmV2aW91c0V2ZW50ID8gKGR4ID0gZXZlbnQuY2xpZW50WCAtIHByZXZpb3VzRXZlbnQuY2xpZW50WCkgOiAoZHggPSBldmVudC5jbGllbnRYKTtcbiAgICBzZXRMZWZ0KGR4LCBlbGVtZW50KTtcbiAgICBjdXJyZW50UG9pbnRlckV2ZW50c1tldmVudC5wb2ludGVySWRdID0gZXZlbnQ7XG4gIH0gZWxzZSBpZiAocG9pbnRlcnNDb3VudCA9PT0gMikge1xuICAgIGN1cnJlbnRQb2ludGVyRXZlbnRzW2V2ZW50LnBvaW50ZXJJZF0gPSBldmVudDtcbiAgICBjb25zdCBldmVudHMgPSBPYmplY3Qua2V5cyhjdXJyZW50UG9pbnRlckV2ZW50cykubWFwKGtleSA9PiBjdXJyZW50UG9pbnRlckV2ZW50c1trZXldKTtcbiAgICBpZiAoZXZlbnRzWzBdICYmIGV2ZW50c1sxXSkge1xuICAgICAgZGlzdGFuY2UgPSBnZXREaXN0YW5jZSg8UG9pbnRlckV2ZW50PmV2ZW50c1swXSwgPFBvaW50ZXJFdmVudD5ldmVudHNbMV0pO1xuICAgICAgYW5nbGUgPSBnZXRBbmdsZSg8UG9pbnRlckV2ZW50PmV2ZW50c1swXSwgPFBvaW50ZXJFdmVudD5ldmVudHNbMV0pO1xuICAgIH1cbiAgICBpZiAoIWdlc3R1cmUuc3RhcnREaXN0YW5jZSkge1xuICAgICAgZ2VzdHVyZS5zdGFydFpvb20gPSBpbWFnZVN0YXRlLnpvb207XG4gICAgICBnZXN0dXJlLnN0YXJ0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIGdlc3R1cmUuc3RhcnRCcmlnaHRuZXNzID0gaW1hZ2VTdGF0ZS5icmlnaHRuZXNzO1xuICAgICAgZ2VzdHVyZS5zdGFydEFuZ2xlID0gYW5nbGU7XG4gICAgICBnZXN0dXJlLmFuZ2xlRGlmZiA9IDA7XG4gICAgICBnZXN0dXJlLnR5cGUgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBkaWZmOiBudW1iZXIgPSBkaXN0YW5jZSAtIGdlc3R1cmUuc3RhcnREaXN0YW5jZTtcbiAgICBsZXQgYW5nbGVEaWZmOiBudW1iZXIgPSAwO1xuICAgIC8v0JXRgdC70Lgg0YDQsNGB0YHRgtC+0Y/QvdC40LUg0LHQvtC70YzRiNC1IDEwLCDRgtC+IHpvb21cbiAgICBjb25zdCBkaWZmRXhhbXBsZTogbnVtYmVyID0gMTA7XG4gICAgLy/QldGB0LvQuCDRg9Cz0L7QuyDQsdC+0LvRjNGI0LUgOCwg0YLQviDQv9C+0LLQvtGA0L7RglxuICAgIGNvbnN0IGFuZ2xlRGlmZkV4YW1wbGUgPSA4O1xuICAgIGlmIChnZXN0dXJlLnN0YXJ0QW5nbGUpIGFuZ2xlRGlmZiA9IGFuZ2xlIC0gZ2VzdHVyZS5zdGFydEFuZ2xlO1xuICAgIGlmICghZ2VzdHVyZS50eXBlKSB7XG4gICAgICBpZiAoTWF0aC5hYnMoZGlmZikgPCBkaWZmRXhhbXBsZSAmJiBNYXRoLmFicyhhbmdsZURpZmYpIDwgYW5nbGVEaWZmRXhhbXBsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKGRpZmYpID4gZGlmZkV4YW1wbGUpIHtcbiAgICAgICAgZ2VzdHVyZS50eXBlID0gJ3pvb20nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VzdHVyZS50eXBlID0gJ3JvdGF0ZSc7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChnZXN0dXJlLnR5cGUgPT09ICd6b29tJykge1xuICAgICAgY29uc3QgeyB6b29tTWluLCB6b29tTWF4IH0gPSBpbWFnZVN0YXRlO1xuICAgICAgbGV0IHpvb206IG51bWJlciA9IHpvb21NaW47XG4gICAgICBnZXN0dXJlLnN0YXJ0Wm9vbSA/ICh6b29tID0gZ2VzdHVyZS5zdGFydFpvb20gKyBkaWZmKSA6ICh6b29tID0gem9vbU1pbiArIGRpZmYpO1xuICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgIHpvb20gPSBNYXRoLm1heCh6b29tLCB6b29tTWluKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpvb20gPSBNYXRoLm1pbih6b29tLCB6b29tTWF4KTtcbiAgICAgIH1cbiAgICAgIGltYWdlU3RhdGUuem9vbSA9IHpvb207XG4gICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gYCR7em9vbX0lYDtcbiAgICB9XG4gICAgaWYgKGdlc3R1cmUudHlwZSA9PT0gJ3JvdGF0ZScpIHtcbiAgICAgIGNvbnN0IHsgYnJpZ2h0bmVzc01pbiwgYnJpZ2h0bmVzc01heCB9ID0gaW1hZ2VTdGF0ZTtcbiAgICAgIGlmIChNYXRoLmFicyhnZXN0dXJlLmFuZ2xlRGlmZiA/IGFuZ2xlRGlmZiAtIGdlc3R1cmUuYW5nbGVEaWZmIDogYW5nbGVEaWZmKSA+IGJyaWdodG5lc3NNYXgpIHtcbiAgICAgICAgZ2VzdHVyZS5zdGFydEJyaWdodG5lc3MgPSBpbWFnZVN0YXRlLmJyaWdodG5lc3M7XG4gICAgICAgIGdlc3R1cmUuc3RhcnRBbmdsZSA9IGFuZ2xlO1xuICAgICAgICBnZXN0dXJlLmFuZ2xlRGlmZiA9IGJyaWdodG5lc3NNaW47XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8v0LrQvtGN0YTRhNC40YbQuNC10L3RglxuICAgICAgY29uc3QgazogbnVtYmVyID0gNTA7XG4gICAgICBnZXN0dXJlLmFuZ2xlRGlmZiA9IGFuZ2xlRGlmZjtcbiAgICAgIGxldCBicmlnaHRuZXNzOiBudW1iZXIgPSAwO1xuICAgICAgaWYgKGdlc3R1cmUuc3RhcnRCcmlnaHRuZXNzKSBicmlnaHRuZXNzID0gZ2VzdHVyZS5zdGFydEJyaWdodG5lc3MgKyBhbmdsZURpZmYgLyBrO1xuICAgICAgaWYgKGFuZ2xlRGlmZiA8IDApIHtcbiAgICAgICAgYnJpZ2h0bmVzcyA9IE1hdGgubWF4KGJyaWdodG5lc3MsIGJyaWdodG5lc3NNaW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJpZ2h0bmVzcyA9IE1hdGgubWluKGJyaWdodG5lc3MsIGJyaWdodG5lc3NNYXgpO1xuICAgICAgfVxuICAgICAgaW1hZ2VTdGF0ZS5icmlnaHRuZXNzID0gYnJpZ2h0bmVzcztcbiAgICAgIGVsZW1lbnQuc3R5bGUuZmlsdGVyID0gYGJyaWdodG5lc3MoJHticmlnaHRuZXNzfSlgO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwb2ludGVyVXBIYW5kbGVyKGV2ZW50OiBQb2ludGVyRXZlbnQpIHtcbiAgZ2VzdHVyZSA9IG51bGw7XG4gIGRlbGV0ZSBjdXJyZW50UG9pbnRlckV2ZW50c1tldmVudC5wb2ludGVySWRdO1xufVxuXG5jb25zdCBmYWtlUG9pbnRlcjogSFRNTERpdkVsZW1lbnQgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZha2UtcG9pbnRlcicpO1xuXG5mdW5jdGlvbiBmYWtlUG9pbnRlckhhbmRsZXIoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgaWYgKGN1cnJlbnRQb2ludGVyRXZlbnRzWydmYWtlJ10pIHtcbiAgICBkZWxldGUgY3VycmVudFBvaW50ZXJFdmVudHMuZmFrZTtcbiAgICBmYWtlUG9pbnRlci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgIGZha2VQb2ludGVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICBmYWtlUG9pbnRlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfSBlbHNlIHtcbiAgICBjdXJyZW50UG9pbnRlckV2ZW50c1snZmFrZSddID0gZXZlbnQ7XG4gICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IGZha2VQb2ludGVyLm9mZnNldFdpZHRoO1xuICAgIGZha2VQb2ludGVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGZha2VQb2ludGVyLnNldEF0dHJpYnV0ZShcbiAgICAgICdzdHlsZScsXG4gICAgICBgbGVmdDoke2ltYWdlU3RhdGUubGVmdCArIGV2ZW50LnBhZ2VYIC0gd2lkdGggLyAyfXB4OyB0b3A6ICR7ZXZlbnQucGFnZVkgLSB3aWR0aCAvIDJ9cHhgXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgdG91Y2hFdmVudHMgZnJvbSAnLi90b3VjaEVudGVyJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihldmVudHM6IERldmljZUV2ZW50W10pOiB2b2lkIHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gIGlmIChjb250ZW50KSB7XG4gICAgZXZlbnRzLmZvckVhY2goXG4gICAgICAoZXZlbnQ6IERldmljZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50RWxlbWVudCA9IGNyZWF0ZUV2ZW50RWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZXZlbnRFbGVtZW50KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRvdWNoRXZlbnRzLnRvdWNoRXZlbnQoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgRGV2aWNlRXZlbnQge1xuICB0eXBlOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNvdXJjZTogc3RyaW5nO1xuICB0aW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBudWxsIHwgc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG4gIGRhdGE6IEV2ZW50RGF0YSB8IHVuZGVmaW5lZDtcbiAgc2l6ZTogRXZlbnRTaXplO1xufVxuXG50eXBlIEV2ZW50RGF0YSA9IEV2ZW50RGF0YUF1ZGlvIHwgRXZlbnREYXRhR3JhcGggfCBFdmVudERhdGFJbWFnZSB8IEV2ZW50RGF0YUJ1dHRvbnM7XG5cbnR5cGUgRXZlbnRTaXplID0gJ3MnIHwgJ20nIHwgJ2wnO1xuXG5pbnRlcmZhY2UgRXZlbnREYXRhQXVkaW8ge1xuICBhbGJ1bWNvdmVyOiBzdHJpbmc7XG4gIGFydGlzdDogc3RyaW5nO1xuICB0cmFjazoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBsZW5ndGg6IHN0cmluZztcbiAgfTtcbiAgdm9sdW1lOiBudW1iZXI7XG59XG5pbnRlcmZhY2UgRXZlbnREYXRhR3JhcGgge1xuICB0eXBlOiAnZ3JhcGgnO1xuICB2YWx1ZXM6IG9iamVjdFtdO1xufVxuaW50ZXJmYWNlIEV2ZW50RGF0YUltYWdlIHtcbiAgaW1hZ2U6IHN0cmluZztcbn1cbmludGVyZmFjZSBFdmVudERhdGFCdXR0b25zIHtcbiAgYnV0dG9uczogc3RyaW5nW107XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RWxlbWVudChldmVudDogRGV2aWNlRXZlbnQpIHtcbiAgY29uc3QgdGlsZSA9IDxIVE1MRGl2RWxlbWVudD4oPEhUTUxUZW1wbGF0ZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IHRpbGVTaXplID0gPEhUTUxFbGVtZW50PnRpbGUucXVlcnlTZWxlY3RvcignLnRpbGUnKTtcbiAgdGlsZVNpemUuY2xhc3NMaXN0LmFkZChgJHtldmVudC5zaXplfWApO1xuICBzZWFyY2hBbmRTZXRBdHRyKHRpbGUsICcudHlwZS10aWxlJywgJ3R5cGUnLCBldmVudC50eXBlKTtcbiAgc2VhcmNoRWxlbUFuZElubmVyVGV4dCh0aWxlLCAnLnRpdGxlLXRpbGUnLCBldmVudC50aXRsZSk7XG4gIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGlsZSwgJy5zb3VyY2UtdGlsZScsIGV2ZW50LnNvdXJjZSk7XG4gIGV2ZW50LnR5cGUgPT09ICdjcml0aWNhbCdcbiAgICA/IHNlYXJjaEVsZW1BbmRCZ0ltYWdlKHRpbGUsICcuaWNvbi10aWxlJywgYHVybChpbWcvJHtldmVudC5pY29ufS13aGl0ZS5zdmcpYClcbiAgICA6IHNlYXJjaEVsZW1BbmRCZ0ltYWdlKHRpbGUsICcuaWNvbi10aWxlJywgYHVybChpbWcvJHtldmVudC5pY29ufS5zdmcpYCk7XG4gIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGlsZSwgJy50aW1lLXRpbGUnLCBldmVudC50aW1lKTtcblxuICBpZiAoZXZlbnQuZGVzY3JpcHRpb24pIHtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KHRpbGUsICcuZGVzY3JpcHRpb24tdGlsZScsIGV2ZW50LmRlc2NyaXB0aW9uKTtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICBpZiAoZGF0YSkge1xuICAgIC8v0JXRgdC70Lgg0LXRgdGC0YwgZGF0YSwg0LTQvtCx0LDQstC70Y/QtdC8INC60LvQsNGB0YEgdmlzYWJsZSDRjdC70LXQvNC10L3RgtGDIGluZm8tdGlsZVxuICAgIGNvbnN0IHRpbGVJbmZvID0gPEhUTUxFbGVtZW50PnRpbGUucXVlcnlTZWxlY3RvcignLmluZm8tdGlsZScpO1xuICAgIHRpbGVJbmZvLmNsYXNzTGlzdC5hZGQoJ3Zpc2FibGUnKTtcblxuICAgIC8v0JXRgdC70Lgg0L3QsNGI0LvQuCDRgtGA0LXQuiwg0YLQviDQuNGB0L/QvtC70YzQt9GD0LXQvCDRiNCw0LHQu9C+0L0g0LDRg9C00LjQvlxuICAgIGlmIChpc0V2ZW50RGF0YUF1ZGlvKGRhdGEpKSB7XG4gICAgICBjb25zdCBhdWRpbyA9IDxIVE1MRGl2RWxlbWVudD4oXG4gICAgICAgICg8SFRNTFRlbXBsYXRlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGxhdGUtYXVkaW8nKSkuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICk7XG4gICAgICBmaWxsVGVtcGxhdGVBdWRpbyhhdWRpbywgZGF0YSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIGRhdGFUaWxlLmNsYXNzTGlzdC5hZGQoJ2RhdGEtYXVkaW8nKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGF1ZGlvKTtcbiAgICB9XG5cbiAgICAvL9Cd0LDRiNC70Lgg0YLQuNC/INCz0YDQsNGEXG4gICAgaWYgKGlzRXZlbnREYXRhR3JhcGgoZGF0YSkpIHtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC60LDRgNGC0LjQvdC60YMt0LfQsNCz0LvRg9GI0LrRg1xuICAgICAgY29uc3QgZ3JhcGggPSA8SFRNTERpdkVsZW1lbnQ+KFxuICAgICAgICAoPEhUTUxUZW1wbGF0ZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlLWdyYXBoJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZmlsbFRlbXBsYXRlR3JhcGgoZ3JhcGgsIGRhdGEpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChncmFwaCk7XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQuNC30L7QsdGA0LDQttC10L3QuNC1XG4gICAgaWYgKGlzRXZlbnREYXRhSW1hZ2UoZGF0YSkpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1pbWFnZScpKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICAgICAgKTtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC30LDQs9C70YPRiNC60YMg0LLQvNC10YHRgtC+IFwiZ2V0X2l0X2Zyb21fbW9ja3NfOjMuanBnXCJcbiAgICAgIGNvbnN0IGltZ0RpdiA9IGNyZWF0ZUltYWdlRWxlbWVudCgpO1xuICAgICAgY29uc3QgbGFiZWxzID0gY3JlYXRlTGFiZWxDb250cm9sKCk7XG4gICAgICBpbWFnZS5hcHBlbmRDaGlsZChpbWdEaXYpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICBkYXRhVGlsZS5jbGFzc0xpc3QuYWRkKCdjYW1lcmEnKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGltYWdlKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGxhYmVscyk7XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQutC90L7Qv9C60LhcbiAgICBpZiAoaXNFdmVudERhdGFCdXR0b25zKGRhdGEpKSB7XG4gICAgICBjb25zdCBidG5zID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1idXR0b25zJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZGF0YS5idXR0b25zLmZvckVhY2godGV4dEJ0biA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbnNFbGVtZW50KHRleHRCdG4pO1xuICAgICAgICBjb25zdCBidXR0b25zID0gYnRucy5xdWVyeVNlbGVjdG9yKCcuYnV0dG9ucycpO1xuICAgICAgICBpZiAoYnV0dG9ucykge1xuICAgICAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGJ0bnMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGlsZTtcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFBdWRpbyhldmVudERhdGE6IEV2ZW50RGF0YSk6IGV2ZW50RGF0YSBpcyBFdmVudERhdGFBdWRpbyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFBdWRpbz5ldmVudERhdGEpLnRyYWNrICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFHcmFwaChcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhR3JhcGgge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhR3JhcGg+ZXZlbnREYXRhKS50eXBlICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFJbWFnZShcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhSW1hZ2Uge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhSW1hZ2U+ZXZlbnREYXRhKS5pbWFnZSAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIGlzRXZlbnREYXRhQnV0dG9ucyhcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhQnV0dG9ucyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFCdXR0b25zPmV2ZW50RGF0YSkuYnV0dG9ucyAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGVtcGxhdGVFbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgc2VsZWN0b3I6IHN0cmluZywgaW5uZXJUZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+dGVtcGxhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gaW5uZXJUZXh0O1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBzZWFyY2hFbGVtQW5kQmdJbWFnZSh0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSB1cmw7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VhcmNoQW5kU2V0QXR0cih0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCBhdHRyTmFtZTogc3RyaW5nLCBhdHRyVmFsdWU6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbFRlbXBsYXRlQXVkaW8oYXVkaW86IEhUTUxEaXZFbGVtZW50LCBkYXRhOiBFdmVudERhdGFBdWRpbyk6IHZvaWQge1xuICBpZiAoYXVkaW8gIT09IG51bGwpIHtcbiAgICBzZWFyY2hFbGVtQW5kQmdJbWFnZShhdWRpbywgJy5jb3ZlcicsIGB1cmwoXCIke2RhdGEuYWxidW1jb3Zlcn1cIilgKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmFydGlzdCcsIGAke2RhdGEuYXJ0aXN0fS0ke2RhdGEudHJhY2submFtZX1gKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmxlbmd0aCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ21heCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ3ZhbHVlJywgYCR7ZGF0YS50cmFjay5sZW5ndGh9LzJgKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnZvbHVtZS1yYW5nZScsICd2YWx1ZScsIGRhdGEudm9sdW1lLnRvU3RyaW5nKCkpO1xuICAgIHNlYXJjaEVsZW1BbmRJbm5lclRleHQoYXVkaW8sICcudm9sdW1lJywgYCR7ZGF0YS52b2x1bWV9JWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbGxUZW1wbGF0ZUdyYXBoKGdyYXBoOiBIVE1MRGl2RWxlbWVudCwgZGF0YTogRXZlbnREYXRhR3JhcGgpOiB2b2lkIHtcbiAgaWYgKGdyYXBoICE9PSBudWxsKSB7XG4gICAgY29uc3QgZ3JhcGhOb2RlOiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD5ncmFwaC5xdWVyeVNlbGVjdG9yKCcuZ3JhcGgnKTtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZCA9IGAgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGEucG5nJykgbm8tcmVwZWF0YDtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYC13ZWJraXQtaW1hZ2Utc2V0KCB1cmwoJy4uLy4uL2ltZy9SaWNoZGF0YS5wbmcnKSAxeCwgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGFAMngucG5nJykgMngsIHVybCgnLi4vLi4vaW1hZ2VzL1JpY2hkYXRhQDN4LnBuZycpIDN4IClgO1xuICAgIGdyYXBoTm9kZS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBgY2VudGVyIGJvdHRvbWA7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlSW1hZ2VFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgLy/QstGB0YLQsNCy0LvRj9C10Lwg0LfQsNCz0LvRg9GI0LrRgyDQstC80LXRgdGC0L4gXCJnZXRfaXRfZnJvbV9tb2Nrc186My5qcGdcIlxuICBjb25zdCBpbWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCcuL2ltZy9CaXRtYXAucG5nJylgO1xuICBpbWdEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGAtd2Via2l0LWltYWdlLXNldCggdXJsKCcuLi8uLi9pbWcvQml0bWFwLnBuZycpIDF4LCB1cmwoJy4uLy4uL2ltZy9CaXRtYXAyeC5wbmcnKSAyeCAsIHVybCgnaW1nL0JpdG1hcDN4LnBuZycpIDN4YDtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IGA1MCUgNTAlYDtcbiAgaW1nRGl2LmNsYXNzTGlzdC5hZGQoJ2NhbScpO1xuICBjb25zdCBjYW1TbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2FtU2xpZGVyLmNsYXNzTGlzdC5hZGQoYGNhbS1zbGlkZXJgKTtcbiAgaW1nRGl2LmFwcGVuZENoaWxkKGNhbVNsaWRlcik7XG4gIHJldHVybiBpbWdEaXY7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxhYmVsQ29udHJvbCgpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBsYWJlbHMuY2xhc3NMaXN0LmFkZCgnY29udHJvbC1sYWJlbHMnKTtcbiAgY29uc3QgY29udHJvbFpvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbFpvb20uY2xhc3NMaXN0LmFkZCgnY29udHJvbC16b29tJyk7XG4gIGNvbnN0IGNvbnRyb2xCcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbEJyaWdodC5jbGFzc0xpc3QuYWRkKCdjb250cm9sLWJyaWdodCcpO1xuICBjb250cm9sWm9vbS5pbm5lclRleHQgPSBg0J/RgNC40LHQu9C40LbQtdC90LjQtTogNzglYDtcbiAgY29udHJvbEJyaWdodC5pbm5lclRleHQgPSBg0K/RgNC60L7RgdGC0Yw6IDUwJWA7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sWm9vbSk7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sQnJpZ2h0KTtcbiAgcmV0dXJuIGxhYmVscztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9uc0VsZW1lbnQodGV4dEJ0bjogc3RyaW5nKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RhdGEtYnV0dG9uJyk7XG4gIGJ1dHRvbi5pbm5lclRleHQgPSB0ZXh0QnRuO1xuICByZXR1cm4gYnV0dG9uO1xufVxuIiwiaW1wb3J0ICogYXMgcmVuZGVyRXZlbnRzIGZyb20gJy4vaG9tZS9jb21wb25lbnRzL2luZGV4JztcblxuZGVjbGFyZSBjb25zdCBFVkVOVFNfVVJMOiBzdHJpbmc7XG5cbmZldGNoKEVWRU5UU19VUkwpXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAudGhlbihkYXRhID0+IHJlbmRlckV2ZW50cy5yZW5kZXIoZGF0YS5ldmVudHMpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=