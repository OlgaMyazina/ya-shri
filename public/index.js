!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=49)}({49:function(e,t,n){"use strict";n.r(t);const o=[];let r=-1;const c=[],i=[];let l=100,a=100;function u(){document.querySelector(".camera").setAttribute("touch-action","none");const e=f();e.setAttribute("touch-action","none");const t=g();t.style.opacity="1",function(e){e.addEventListener("pointerdown",d),e.addEventListener("pointermove",s),e.addEventListener("pointerup",p),e.addEventListener("pointercancel",p),e.addEventListener("pointerout",p),e.addEventListener("pointerleave",p)}(e),t.style.left=`${.75*a+15}px`}function d(e){o.push(e),i.push(e)}function s(e){const t=f();for(let t=0;t<o.length;t++)if(e.pointerId==o[t].pointerId){o[t]=e;break}if(2===o.length){let e,n,a,u=Math.abs(o[0].clientX-o[1].clientX),d=o[0].clientX-o[1].clientX,s=o[0].clientY-o[1].clientY,p=0;i.length>0&&(e=i[0].x-i[1].x,n=i[0].y-i[1].y,p=180*(a=Math.atan((e*s-n*d)/(e*d+n*s)))/Math.PI),Math.abs(p)>5&&(t.style.webkitFilter=`brightness(${100+p}%)`,document.querySelector(".control-bright").innerText=`Яркость ${Math.round(100+p)}%`),console.log(`currentScale: ${l}, curDiff: ${u}, prevDiff: ${r} `),r>0&&(l+=u-r),l>200&&(l=200),l<50&&(l=50),t.style.backgroundSize=`${l}% ${l}% `,t.style.webkitBackgroundSize=`${l}% ${l}% `,document.querySelector(".control-zoom").innerText=`Приближение ${l}%`,r=u,c.push(o[0]),c.push(o[1])}1===o.length&&(t.style.backgroundPositionX=`${a}%`,i.length>0&&(a+=i[0].x-e.clientX),a<0&&(a=0),a>200&&(a=200),g().style.left=`${.75*a+15}px`)}function p(e){console.log(e.type,e),m(e,o),o.length<2&&(r=-1,m(e,c),m(e,i))}function m(e,t){for(let n=0;n<t.length;n++)if(t[n].pointerId==e.pointerId){t.splice(n,1);break}}function f(){return document.querySelector(".cam")}function g(){return document.querySelector(".cam-slider")}function y(e){const t=document.querySelector(".content");t&&(e.forEach(e=>{const n=function(e){const t=document.querySelector(".template").content.cloneNode(!0);t.querySelector(".tile").classList.add(`${e.size}`),v(t,".type-tile","type",e.type),h(t,".title-tile",e.title),h(t,".source-tile",e.source),"critical"===e.type?b(t,".icon-tile",`url(img/${e.icon}-white.svg)`):b(t,".icon-tile",`url(img/${e.icon}.svg)`),h(t,".time-tile",e.time),e.description&&h(t,".description-tile",e.description);const n=e.data;if(n){const e=t.querySelector(".info-tile");if(e.classList.add("visable"),function(e){return void 0!==e.track}(n)){const e=document.querySelector(".template-audio").content.cloneNode(!0);!function(e,t){null!==e&&(b(e,".cover",`url("${t.albumcover}")`),h(e,".artist",`${t.artist}-${t.track.name}`),h(e,".length",t.track.length),v(e,".track","max",t.track.length),v(e,".track","value",`${t.track.length}/2`),v(e,".volume-range","value",t.volume.toString()),h(e,".volume",`${t.volume}%`))}(e,n);const o=t.querySelector(".data-tile");o.classList.add("data-audio"),o.appendChild(e)}if(function(e){return void 0!==e.type}(n)){const e=document.querySelector(".template-graph").content.cloneNode(!0);!function(e,t){if(null!==e){const t=e.querySelector(".graph");t.style.background=" url('../../img/Richdata.png') no-repeat",t.style.backgroundImage="-webkit-image-set( url('../../img/Richdata.png') 1x, url('../../img/Richdata@2x.png') 2x, url('../../images/Richdata@3x.png') 3x )",t.style.backgroundPosition="center bottom"}}(e);const n=t.querySelector(".data-tile");n.appendChild(e)}if(function(e){return void 0!==e.image}(n)){const e=document.querySelector(".template-image").content.cloneNode(!0),n=function(){const e=document.createElement("div");e.style.background="url('./img/Bitmap.png')",e.style.background="-webkit-image-set( url('../../img/Bitmap.png') 1x, url('../../img/Bitmap2x.png') 2x , url('img/Bitmap3x.png') 3x",e.style.backgroundPosition="50% 50%",e.classList.add("cam");const t=document.createElement("div");return t.classList.add("cam-slider"),e.appendChild(t),e}(),o=function(){const e=document.createElement("div");e.classList.add("control-labels");const t=document.createElement("div");t.classList.add("control-zoom");const n=document.createElement("div");return n.classList.add("control-bright"),t.innerText="Приближение: 78%",n.innerText="Яркость: 50%",e.appendChild(t),e.appendChild(n),e}();e.appendChild(n);const r=t.querySelector(".data-tile");r.classList.add("camera"),r.appendChild(e),r.appendChild(o)}if(function(e){return void 0!==e.buttons}(n)){const e=document.querySelector(".template-buttons").content.cloneNode(!0);n.buttons.forEach(t=>{const n=function(e){const t=document.createElement("div");return t.classList.add("data-button"),t.innerText=e,t}(t),o=e.querySelector(".buttons");o&&o.appendChild(n)});const o=t.querySelector(".data-tile");o.appendChild(e)}}return t}(e);t.appendChild(n)}),u())}function h(e,t,n){const o=e.querySelector(t);return o&&(o.innerText=n),o}function b(e,t,n){const o=e.querySelector(t);o&&(o.style.backgroundImage=n)}function v(e,t,n,o){const r=e.querySelector(t);r&&r.setAttribute(n,o)}fetch("http://localhost:8000/api/events").then(e=>e.json()).then(e=>y(e.events))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hvbWUvY29tcG9uZW50cy90b3VjaEVudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ob21lL2NvbXBvbmVudHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXZDYWNoZSIsInByZXZEaWZmIiwicHJldkNvb3JkIiwic3RhcnRDb29yZCIsImN1cnJlbnRTY2FsZSIsImN1cnJlbnRQb3MiLCJ0b3VjaEV2ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiZWxlbWVudCIsImdldENhbUVsZW0iLCJjYW1TbGlkZXIiLCJnZXRDYW1TbGlkZXIiLCJzdHlsZSIsIm9wYWNpdHkiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwb2ludGVyZG93bl9oYW5kbGVyIiwicG9pbnRlcm1vdmVfaGFuZGxlciIsInBvaW50ZXJ1cF9oYW5kbGVyIiwiaW5pdCIsImxlZnQiLCJldiIsInB1c2giLCJjYW1FbGVtZW50IiwibGVuZ3RoIiwicG9pbnRlcklkIiwiZGlzdFhzdGFydCIsImRpc3RZc3RhcnQiLCJhIiwiY3VyRGlmZiIsIk1hdGgiLCJhYnMiLCJjbGllbnRYIiwiZGlzdFgiLCJkaXN0WSIsImNsaWVudFkiLCJncmFkQSIsIngiLCJ5IiwiYXRhbiIsIlBJIiwid2Via2l0RmlsdGVyIiwiaW5uZXJUZXh0Iiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiYmFja2dyb3VuZFNpemUiLCJ3ZWJraXRCYWNrZ3JvdW5kU2l6ZSIsImJhY2tncm91bmRQb3NpdGlvblgiLCJ0eXBlIiwicmVtb3ZlX2V2ZW50IiwiYXJyIiwic3BsaWNlIiwicmVuZGVyIiwiZXZlbnRzIiwiY29udGVudCIsImZvckVhY2giLCJldmVudCIsImV2ZW50RWxlbWVudCIsInRpbGUiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzaXplIiwic2VhcmNoQW5kU2V0QXR0ciIsInNlYXJjaEVsZW1BbmRJbm5lclRleHQiLCJ0aXRsZSIsInNvdXJjZSIsInNlYXJjaEVsZW1BbmRCZ0ltYWdlIiwiaWNvbiIsInRpbWUiLCJkZXNjcmlwdGlvbiIsImRhdGEiLCJ0aWxlSW5mbyIsImV2ZW50RGF0YSIsInRyYWNrIiwiaXNFdmVudERhdGFBdWRpbyIsImF1ZGlvIiwiYWxidW1jb3ZlciIsImFydGlzdCIsInZvbHVtZSIsInRvU3RyaW5nIiwiZmlsbFRlbXBsYXRlQXVkaW8iLCJkYXRhVGlsZSIsImFwcGVuZENoaWxkIiwiaXNFdmVudERhdGFHcmFwaCIsImdyYXBoIiwiZ3JhcGhOb2RlIiwiYmFja2dyb3VuZCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRQb3NpdGlvbiIsImZpbGxUZW1wbGF0ZUdyYXBoIiwiaW1hZ2UiLCJpc0V2ZW50RGF0YUltYWdlIiwiaW1nRGl2IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUltYWdlRWxlbWVudCIsImxhYmVscyIsImNvbnRyb2xab29tIiwiY29udHJvbEJyaWdodCIsImNyZWF0ZUxhYmVsQ29udHJvbCIsImJ1dHRvbnMiLCJpc0V2ZW50RGF0YUJ1dHRvbnMiLCJidG5zIiwidGV4dEJ0biIsImJ1dHRvbiIsImNyZWF0ZUJ1dHRvbnNFbGVtZW50IiwiY3JlYXRlRXZlbnRFbGVtZW50IiwidGVtcGxhdGVFbGVtZW50Iiwic2VsZWN0b3IiLCJ1cmwiLCJhdHRyTmFtZSIsImF0dHJWYWx1ZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFB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LyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNDkpO1xuIiwiLyrQodC10L3RgdC+0YDQvdGL0Lkg0LLQstC+0LQgKi9cbmNvbnN0IGV2Q2FjaGU6IFBvaW50ZXJFdmVudFtdID0gW107XG5sZXQgcHJldkRpZmYgPSAtMTtcbi8v0LzQsNGB0YHQuNCyINC/0YDQtdC00YvQtNGD0YnQuNGFINC60L7QvtGA0LTQuNC90LDRglxuY29uc3QgcHJldkNvb3JkOiBQb2ludGVyRXZlbnRbXSA9IFtdO1xuY29uc3Qgc3RhcnRDb29yZDogUG9pbnRlckV2ZW50W10gPSBbXTtcbmxldCBjdXJyZW50U2NhbGUgPSAxMDAsXG4gIGN1cnJlbnRQb3MgPSAxMDA7XG5cbmV4cG9ydCBmdW5jdGlvbiB0b3VjaEV2ZW50KCkge1xuICAvL9Cf0L7Qu9GD0YfQsNC10Lwg0Y3Qu9C10LzQtdC90YIgLSDQutCw0LzQtdGA0YsgLSDQutCw0YDRgtC40L3QutC4LCDRh9GC0L7QsdGLINCy0YDQsNGJ0LDRgtGMXG4gIGNvbnN0IGNhbSA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhJyk7XG4gIGNhbS5zZXRBdHRyaWJ1dGUoJ3RvdWNoLWFjdGlvbicsICdub25lJyk7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZXRDYW1FbGVtKCk7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nLCAnbm9uZScpO1xuICBjb25zdCBjYW1TbGlkZXIgPSBnZXRDYW1TbGlkZXIoKTtcbiAgY2FtU2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gIGluaXQoZWxlbWVudCk7XG4gIGNhbVNsaWRlci5zdHlsZS5sZWZ0ID0gYCR7Y3VycmVudFBvcyAqIDAuNzUgKyAxNX1weGA7XG59XG5cbmZ1bmN0aW9uIGluaXQoZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gIC8v0L3QsNCy0LXRiNC40LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDRgdC+0LHRi9GC0LjRj1xuXG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgcG9pbnRlcmRvd25faGFuZGxlcik7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgcG9pbnRlcm1vdmVfaGFuZGxlcik7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHBvaW50ZXJ1cF9oYW5kbGVyKTtcblxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyY2FuY2VsJywgcG9pbnRlcnVwX2hhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyb3V0JywgcG9pbnRlcnVwX2hhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCBwb2ludGVydXBfaGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIHBvaW50ZXJkb3duX2hhbmRsZXIoZXY6IFBvaW50ZXJFdmVudCkge1xuICBldkNhY2hlLnB1c2goZXYpO1xuICBzdGFydENvb3JkLnB1c2goZXYpO1xufVxuXG5mdW5jdGlvbiBwb2ludGVybW92ZV9oYW5kbGVyKGV2OiBQb2ludGVyRXZlbnQpIHtcbiAgY29uc3QgY2FtRWxlbWVudCA9IGdldENhbUVsZW0oKTtcbiAgLy8gRmluZCB0aGlzIGV2ZW50IGluIHRoZSBjYWNoZSBhbmQgdXBkYXRlIGl0cyByZWNvcmQgd2l0aCB0aGlzIGV2ZW50XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZXZDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChldi5wb2ludGVySWQgPT0gZXZDYWNoZVtpXS5wb2ludGVySWQpIHtcbiAgICAgIGV2Q2FjaGVbaV0gPSBldjtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIHR3byBwb2ludGVycyBhcmUgZG93biwgY2hlY2sgZm9yIHBpbmNoIGdlc3R1cmVzXG4gIGlmIChldkNhY2hlLmxlbmd0aCA9PT0gMikge1xuICAgIC8vINCg0LDRgdGB0YLQvtGP0L3QuNC1INC80LXQttC00YMg0L/QsNC70YzRhtCw0LzQuCDQv9C+INGFXG4gICAgbGV0IGN1ckRpZmYgPSBNYXRoLmFicyhldkNhY2hlWzBdLmNsaWVudFggLSBldkNhY2hlWzFdLmNsaWVudFgpO1xuICAgIGxldCBkaXN0WCA9IGV2Q2FjaGVbMF0uY2xpZW50WCAtIGV2Q2FjaGVbMV0uY2xpZW50WDtcbiAgICBsZXQgZGlzdFkgPSBldkNhY2hlWzBdLmNsaWVudFkgLSBldkNhY2hlWzFdLmNsaWVudFk7XG4gICAgbGV0IGRpc3RYc3RhcnQsIGRpc3RZc3RhcnQ7XG5cbiAgICBsZXQgYSxcbiAgICAgIGdyYWRBID0gMDtcbiAgICBpZiAoc3RhcnRDb29yZC5sZW5ndGggPiAwKSB7XG4gICAgICBkaXN0WHN0YXJ0ID0gc3RhcnRDb29yZFswXS54IC0gc3RhcnRDb29yZFsxXS54O1xuICAgICAgZGlzdFlzdGFydCA9IHN0YXJ0Q29vcmRbMF0ueSAtIHN0YXJ0Q29vcmRbMV0ueTtcblxuICAgICAgYSA9IE1hdGguYXRhbigoZGlzdFhzdGFydCAqIGRpc3RZIC0gZGlzdFlzdGFydCAqIGRpc3RYKSAvIChkaXN0WHN0YXJ0ICogZGlzdFggKyBkaXN0WXN0YXJ0ICogZGlzdFkpKTtcbiAgICAgIGdyYWRBID0gKGEgKiAxODApIC8gTWF0aC5QSTtcbiAgICB9XG5cbiAgICBpZiAoTWF0aC5hYnMoZ3JhZEEpID4gNSkge1xuICAgICAgLy/Qt9C90LDRh9C40YIg0L/QvtCy0L7RgNC+0YJcbiAgICAgIGNhbUVsZW1lbnQuc3R5bGUud2Via2l0RmlsdGVyID0gYGJyaWdodG5lc3MoJHsxMDAgKyBncmFkQX0lKWA7XG4gICAgICAvL2VsLnN0eWxlLmZpbHRlciA9IGBicmlnaHRuZXNzKCR7MTAwICsgZ3JhZEF9JSlgO1xuICAgICAgZ2V0QnJpZ2h0RWxlbSgpLmlubmVyVGV4dCA9IGDQr9GA0LrQvtGB0YLRjCAke01hdGgucm91bmQoMTAwICsgZ3JhZEEpfSVgO1xuICAgIH1cbiAgICB7XG4gICAgICBjb25zb2xlLmxvZyhgY3VycmVudFNjYWxlOiAke2N1cnJlbnRTY2FsZX0sIGN1ckRpZmY6ICR7Y3VyRGlmZn0sIHByZXZEaWZmOiAke3ByZXZEaWZmfSBgKTtcblxuICAgICAgaWYgKHByZXZEaWZmID4gMCkgY3VycmVudFNjYWxlICs9IGN1ckRpZmYgLSBwcmV2RGlmZjtcbiAgICAgIGlmIChjdXJyZW50U2NhbGUgPiAyMDApIGN1cnJlbnRTY2FsZSA9IDIwMDtcbiAgICAgIGlmIChjdXJyZW50U2NhbGUgPCA1MCkgY3VycmVudFNjYWxlID0gNTA7XG4gICAgICBjYW1FbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gYCR7Y3VycmVudFNjYWxlfSUgJHtjdXJyZW50U2NhbGV9JSBgO1xuICAgICAgY2FtRWxlbWVudC5zdHlsZS53ZWJraXRCYWNrZ3JvdW5kU2l6ZSA9IGAke2N1cnJlbnRTY2FsZX0lICR7Y3VycmVudFNjYWxlfSUgYDtcbiAgICAgIGdldFpvb21FbGVtKCkuaW5uZXJUZXh0ID0gYNCf0YDQuNCx0LvQuNC20LXQvdC40LUgJHtjdXJyZW50U2NhbGV9JWA7XG4gICAgfVxuXG4gICAgLy8g0YHQvtGF0YDQsNGP0L3Rj9C10Lwg0L3QsNGH0LDQu9GM0L3Ri9C1INC4INC/0YDQtdC00YvQtNGD0YnQuNC1INC60L7QvtGA0LTQuNC90LDRgtGLXG4gICAgcHJldkRpZmYgPSBjdXJEaWZmO1xuICAgIHByZXZDb29yZC5wdXNoKGV2Q2FjaGVbMF0pO1xuICAgIHByZXZDb29yZC5wdXNoKGV2Q2FjaGVbMV0pO1xuICB9XG5cbiAgaWYgKGV2Q2FjaGUubGVuZ3RoID09PSAxKSB7XG4gICAgLy/CoNC30L3QsNGH0LjRgiDQv9C10YDQtdC80LXRidC10L3QuNC1INCy0LvQtdCy0L4g0LjQu9C4INCy0L/RgNCw0LLQviAoc3dpcGUpXG4gICAgY2FtRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25YID0gYCR7Y3VycmVudFBvc30lYDtcbiAgICAvL2NhbUVsZW1lbnQuc3R5bGUud2Via2l0QmFja2dyb3VuZFBvc2l0aW9uWCA9IGAke2N1cnJlbnRQb3N9JWA7XG5cbiAgICBpZiAoc3RhcnRDb29yZC5sZW5ndGggPiAwKSB7XG4gICAgICBjdXJyZW50UG9zICs9IHN0YXJ0Q29vcmRbMF0ueCAtIGV2LmNsaWVudFg7XG4gICAgfVxuICAgIGlmIChjdXJyZW50UG9zIDwgMCkgY3VycmVudFBvcyA9IDA7XG4gICAgaWYgKGN1cnJlbnRQb3MgPiAyMDApIGN1cnJlbnRQb3MgPSAyMDA7XG4gICAgZ2V0Q2FtU2xpZGVyKCkuc3R5bGUubGVmdCA9IGAke2N1cnJlbnRQb3MgKiAwLjc1ICsgMTV9cHhgO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBvaW50ZXJ1cF9oYW5kbGVyKGV2OiBQb2ludGVyRXZlbnQpIHtcbiAgY29uc29sZS5sb2coZXYudHlwZSwgZXYpO1xuICAvLyDQo9C00LDQu9C10L3QuNC1INC/0YDQtdC00YvQtNGD0YnQuNGFINC4INC90LDRh9Cw0LvRjNC90YvRhSDQutC+0L7RgNC00LjQvdCw0YJcbiAgcmVtb3ZlX2V2ZW50KGV2LCBldkNhY2hlKTtcblxuICBpZiAoZXZDYWNoZS5sZW5ndGggPCAyKSB7XG4gICAgcHJldkRpZmYgPSAtMTtcbiAgICAvL9Cj0LTQsNC70Y/QtdC8INGB0YLQsNGA0YLQvtCy0YvQtSDQutC+0L7RgNC00LjQvdCw0YLRi1xuICAgIHJlbW92ZV9ldmVudChldiwgcHJldkNvb3JkKTtcbiAgICByZW1vdmVfZXZlbnQoZXYsIHN0YXJ0Q29vcmQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZV9ldmVudChldjogUG9pbnRlckV2ZW50LCBhcnI6IFBvaW50ZXJFdmVudFtdKSB7XG4gIC8vIFJlbW92ZSB0aGlzIGV2ZW50IGZyb20gdGhlIHRhcmdldCdzIGNhY2hlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFycltpXS5wb2ludGVySWQgPT0gZXYucG9pbnRlcklkKSB7XG4gICAgICBhcnIuc3BsaWNlKGksIDEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldENhbUVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW0nKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldEJyaWdodEVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sLWJyaWdodCcpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gZ2V0Wm9vbUVsZW0oKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sLXpvb20nKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldENhbVNsaWRlcigpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGNhbVNsaWRlciA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtLXNsaWRlcicpO1xuICByZXR1cm4gY2FtU2xpZGVyO1xufVxuIiwiaW1wb3J0ICogYXMgdG91Y2hFdmVudHMgZnJvbSAnLi90b3VjaEVudGVyJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihldmVudHM6IERldmljZUV2ZW50W10pOiB2b2lkIHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gIGlmIChjb250ZW50KSB7XG4gICAgZXZlbnRzLmZvckVhY2goXG4gICAgICAoZXZlbnQ6IERldmljZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50RWxlbWVudCA9IGNyZWF0ZUV2ZW50RWxlbWVudChldmVudCk7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZXZlbnRFbGVtZW50KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRvdWNoRXZlbnRzLnRvdWNoRXZlbnQoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgRGV2aWNlRXZlbnQge1xuICB0eXBlOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNvdXJjZTogc3RyaW5nO1xuICB0aW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBudWxsIHwgc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG4gIGRhdGE6IEV2ZW50RGF0YSB8IHVuZGVmaW5lZDtcbiAgc2l6ZTogRXZlbnRTaXplO1xufVxuXG50eXBlIEV2ZW50RGF0YSA9IEV2ZW50RGF0YUF1ZGlvIHwgRXZlbnREYXRhR3JhcGggfCBFdmVudERhdGFJbWFnZSB8IEV2ZW50RGF0YUJ1dHRvbnM7XG5cbnR5cGUgRXZlbnRTaXplID0gJ3MnIHwgJ20nIHwgJ2wnO1xuXG5pbnRlcmZhY2UgRXZlbnREYXRhQXVkaW8ge1xuICBhbGJ1bWNvdmVyOiBzdHJpbmc7XG4gIGFydGlzdDogc3RyaW5nO1xuICB0cmFjazoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBsZW5ndGg6IHN0cmluZztcbiAgfTtcbiAgdm9sdW1lOiBudW1iZXI7XG59XG5pbnRlcmZhY2UgRXZlbnREYXRhR3JhcGgge1xuICB0eXBlOiAnZ3JhcGgnO1xuICB2YWx1ZXM6IG9iamVjdFtdO1xufVxuaW50ZXJmYWNlIEV2ZW50RGF0YUltYWdlIHtcbiAgaW1hZ2U6IHN0cmluZztcbn1cbmludGVyZmFjZSBFdmVudERhdGFCdXR0b25zIHtcbiAgYnV0dG9uczogc3RyaW5nW107XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RWxlbWVudChldmVudDogRGV2aWNlRXZlbnQpIHtcbiAgY29uc3QgdGlsZSA9IDxIVE1MRGl2RWxlbWVudD4oPEhUTUxUZW1wbGF0ZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IHRpbGVTaXplID0gPEhUTUxFbGVtZW50PnRpbGUucXVlcnlTZWxlY3RvcignLnRpbGUnKTtcbiAgdGlsZVNpemUuY2xhc3NMaXN0LmFkZChgJHtldmVudC5zaXplfWApO1xuICBzZWFyY2hBbmRTZXRBdHRyKHRpbGUsICcudHlwZS10aWxlJywgJ3R5cGUnLCBldmVudC50eXBlKTtcbiAgc2VhcmNoRWxlbUFuZElubmVyVGV4dCh0aWxlLCAnLnRpdGxlLXRpbGUnLCBldmVudC50aXRsZSk7XG4gIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGlsZSwgJy5zb3VyY2UtdGlsZScsIGV2ZW50LnNvdXJjZSk7XG4gIGV2ZW50LnR5cGUgPT09ICdjcml0aWNhbCdcbiAgICA/IHNlYXJjaEVsZW1BbmRCZ0ltYWdlKHRpbGUsICcuaWNvbi10aWxlJywgYHVybChpbWcvJHtldmVudC5pY29ufS13aGl0ZS5zdmcpYClcbiAgICA6IHNlYXJjaEVsZW1BbmRCZ0ltYWdlKHRpbGUsICcuaWNvbi10aWxlJywgYHVybChpbWcvJHtldmVudC5pY29ufS5zdmcpYCk7XG4gIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGlsZSwgJy50aW1lLXRpbGUnLCBldmVudC50aW1lKTtcblxuICBpZiAoZXZlbnQuZGVzY3JpcHRpb24pIHtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KHRpbGUsICcuZGVzY3JpcHRpb24tdGlsZScsIGV2ZW50LmRlc2NyaXB0aW9uKTtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICBpZiAoZGF0YSkge1xuICAgIC8v0JXRgdC70Lgg0LXRgdGC0YwgZGF0YSwg0LTQvtCx0LDQstC70Y/QtdC8INC60LvQsNGB0YEgdmlzYWJsZSDRjdC70LXQvNC10L3RgtGDIGluZm8tdGlsZVxuICAgIGNvbnN0IHRpbGVJbmZvID0gPEhUTUxFbGVtZW50PnRpbGUucXVlcnlTZWxlY3RvcignLmluZm8tdGlsZScpO1xuICAgIHRpbGVJbmZvLmNsYXNzTGlzdC5hZGQoJ3Zpc2FibGUnKTtcblxuICAgIC8v0JXRgdC70Lgg0L3QsNGI0LvQuCDRgtGA0LXQuiwg0YLQviDQuNGB0L/QvtC70YzQt9GD0LXQvCDRiNCw0LHQu9C+0L0g0LDRg9C00LjQvlxuICAgIGlmIChpc0V2ZW50RGF0YUF1ZGlvKGRhdGEpKSB7XG4gICAgICBjb25zdCBhdWRpbyA9IDxIVE1MRGl2RWxlbWVudD4oXG4gICAgICAgICg8SFRNTFRlbXBsYXRlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGxhdGUtYXVkaW8nKSkuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICk7XG4gICAgICBmaWxsVGVtcGxhdGVBdWRpbyhhdWRpbywgZGF0YSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIGRhdGFUaWxlLmNsYXNzTGlzdC5hZGQoJ2RhdGEtYXVkaW8nKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGF1ZGlvKTtcbiAgICB9XG5cbiAgICAvL9Cd0LDRiNC70Lgg0YLQuNC/INCz0YDQsNGEXG4gICAgaWYgKGlzRXZlbnREYXRhR3JhcGgoZGF0YSkpIHtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC60LDRgNGC0LjQvdC60YMt0LfQsNCz0LvRg9GI0LrRg1xuICAgICAgY29uc3QgZ3JhcGggPSA8SFRNTERpdkVsZW1lbnQ+KFxuICAgICAgICAoPEhUTUxUZW1wbGF0ZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlLWdyYXBoJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZmlsbFRlbXBsYXRlR3JhcGgoZ3JhcGgsIGRhdGEpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChncmFwaCk7XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQuNC30L7QsdGA0LDQttC10L3QuNC1XG4gICAgaWYgKGlzRXZlbnREYXRhSW1hZ2UoZGF0YSkpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1pbWFnZScpKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICAgICAgKTtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC30LDQs9C70YPRiNC60YMg0LLQvNC10YHRgtC+IFwiZ2V0X2l0X2Zyb21fbW9ja3NfOjMuanBnXCJcbiAgICAgIGNvbnN0IGltZ0RpdiA9IGNyZWF0ZUltYWdlRWxlbWVudCgpO1xuICAgICAgY29uc3QgbGFiZWxzID0gY3JlYXRlTGFiZWxDb250cm9sKCk7XG4gICAgICBpbWFnZS5hcHBlbmRDaGlsZChpbWdEaXYpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICBkYXRhVGlsZS5jbGFzc0xpc3QuYWRkKCdjYW1lcmEnKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGltYWdlKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGxhYmVscyk7XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQutC90L7Qv9C60LhcbiAgICBpZiAoaXNFdmVudERhdGFCdXR0b25zKGRhdGEpKSB7XG4gICAgICBjb25zdCBidG5zID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1idXR0b25zJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZGF0YS5idXR0b25zLmZvckVhY2godGV4dEJ0biA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbnNFbGVtZW50KHRleHRCdG4pO1xuICAgICAgICBjb25zdCBidXR0b25zID0gYnRucy5xdWVyeVNlbGVjdG9yKCcuYnV0dG9ucycpO1xuICAgICAgICBpZiAoYnV0dG9ucykge1xuICAgICAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIGRhdGFUaWxlLmFwcGVuZENoaWxkKGJ0bnMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGlsZTtcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFBdWRpbyhldmVudERhdGE6IEV2ZW50RGF0YSk6IGV2ZW50RGF0YSBpcyBFdmVudERhdGFBdWRpbyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFBdWRpbz5ldmVudERhdGEpLnRyYWNrICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFHcmFwaChcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhR3JhcGgge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhR3JhcGg+ZXZlbnREYXRhKS50eXBlICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFJbWFnZShcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhSW1hZ2Uge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhSW1hZ2U+ZXZlbnREYXRhKS5pbWFnZSAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIGlzRXZlbnREYXRhQnV0dG9ucyhcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhQnV0dG9ucyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFCdXR0b25zPmV2ZW50RGF0YSkuYnV0dG9ucyAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGVtcGxhdGVFbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgc2VsZWN0b3I6IHN0cmluZywgaW5uZXJUZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+dGVtcGxhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gaW5uZXJUZXh0O1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBzZWFyY2hFbGVtQW5kQmdJbWFnZSh0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSB1cmw7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VhcmNoQW5kU2V0QXR0cih0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCBhdHRyTmFtZTogc3RyaW5nLCBhdHRyVmFsdWU6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbFRlbXBsYXRlQXVkaW8oYXVkaW86IEhUTUxEaXZFbGVtZW50LCBkYXRhOiBFdmVudERhdGFBdWRpbyk6IHZvaWQge1xuICBpZiAoYXVkaW8gIT09IG51bGwpIHtcbiAgICBzZWFyY2hFbGVtQW5kQmdJbWFnZShhdWRpbywgJy5jb3ZlcicsIGB1cmwoXCIke2RhdGEuYWxidW1jb3Zlcn1cIilgKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmFydGlzdCcsIGAke2RhdGEuYXJ0aXN0fS0ke2RhdGEudHJhY2submFtZX1gKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmxlbmd0aCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ21heCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ3ZhbHVlJywgYCR7ZGF0YS50cmFjay5sZW5ndGh9LzJgKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnZvbHVtZS1yYW5nZScsICd2YWx1ZScsIGRhdGEudm9sdW1lLnRvU3RyaW5nKCkpO1xuICAgIHNlYXJjaEVsZW1BbmRJbm5lclRleHQoYXVkaW8sICcudm9sdW1lJywgYCR7ZGF0YS52b2x1bWV9JWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbGxUZW1wbGF0ZUdyYXBoKGdyYXBoOiBIVE1MRGl2RWxlbWVudCwgZGF0YTogRXZlbnREYXRhR3JhcGgpOiB2b2lkIHtcbiAgaWYgKGdyYXBoICE9PSBudWxsKSB7XG4gICAgY29uc3QgZ3JhcGhOb2RlOiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD5ncmFwaC5xdWVyeVNlbGVjdG9yKCcuZ3JhcGgnKTtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZCA9IGAgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGEucG5nJykgbm8tcmVwZWF0YDtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYC13ZWJraXQtaW1hZ2Utc2V0KCB1cmwoJy4uLy4uL2ltZy9SaWNoZGF0YS5wbmcnKSAxeCwgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGFAMngucG5nJykgMngsIHVybCgnLi4vLi4vaW1hZ2VzL1JpY2hkYXRhQDN4LnBuZycpIDN4IClgO1xuICAgIGdyYXBoTm9kZS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBgY2VudGVyIGJvdHRvbWA7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlSW1hZ2VFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgLy/QstGB0YLQsNCy0LvRj9C10Lwg0LfQsNCz0LvRg9GI0LrRgyDQstC80LXRgdGC0L4gXCJnZXRfaXRfZnJvbV9tb2Nrc186My5qcGdcIlxuICBjb25zdCBpbWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCcuL2ltZy9CaXRtYXAucG5nJylgO1xuICBpbWdEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGAtd2Via2l0LWltYWdlLXNldCggdXJsKCcuLi8uLi9pbWcvQml0bWFwLnBuZycpIDF4LCB1cmwoJy4uLy4uL2ltZy9CaXRtYXAyeC5wbmcnKSAyeCAsIHVybCgnaW1nL0JpdG1hcDN4LnBuZycpIDN4YDtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IGA1MCUgNTAlYDtcbiAgaW1nRGl2LmNsYXNzTGlzdC5hZGQoJ2NhbScpO1xuICBjb25zdCBjYW1TbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2FtU2xpZGVyLmNsYXNzTGlzdC5hZGQoYGNhbS1zbGlkZXJgKTtcbiAgaW1nRGl2LmFwcGVuZENoaWxkKGNhbVNsaWRlcik7XG4gIHJldHVybiBpbWdEaXY7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxhYmVsQ29udHJvbCgpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBsYWJlbHMuY2xhc3NMaXN0LmFkZCgnY29udHJvbC1sYWJlbHMnKTtcbiAgY29uc3QgY29udHJvbFpvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbFpvb20uY2xhc3NMaXN0LmFkZCgnY29udHJvbC16b29tJyk7XG4gIGNvbnN0IGNvbnRyb2xCcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbEJyaWdodC5jbGFzc0xpc3QuYWRkKCdjb250cm9sLWJyaWdodCcpO1xuICBjb250cm9sWm9vbS5pbm5lclRleHQgPSBg0J/RgNC40LHQu9C40LbQtdC90LjQtTogNzglYDtcbiAgY29udHJvbEJyaWdodC5pbm5lclRleHQgPSBg0K/RgNC60L7RgdGC0Yw6IDUwJWA7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sWm9vbSk7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sQnJpZ2h0KTtcbiAgcmV0dXJuIGxhYmVscztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9uc0VsZW1lbnQodGV4dEJ0bjogc3RyaW5nKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RhdGEtYnV0dG9uJyk7XG4gIGJ1dHRvbi5pbm5lclRleHQgPSB0ZXh0QnRuO1xuICByZXR1cm4gYnV0dG9uO1xufVxuIiwiaW1wb3J0ICogYXMgcmVuZGVyRXZlbnRzIGZyb20gJy4vaG9tZS9jb21wb25lbnRzL2luZGV4JztcblxuZGVjbGFyZSBjb25zdCBFVkVOVFNfVVJMOiBzdHJpbmc7XG5cbmZldGNoKEVWRU5UU19VUkwpXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAudGhlbihkYXRhID0+IHJlbmRlckV2ZW50cy5yZW5kZXIoZGF0YS5ldmVudHMpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=