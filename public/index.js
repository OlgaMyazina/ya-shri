!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=49)}({49:function(e,t,n){"use strict";n.r(t);const o=[];let r=-1;const c=[],i=[];let l=100,a=100;function u(){document.querySelector(".camera").setAttribute("touch-action","none");const e=f();e.setAttribute("touch-action","none");const t=g();t.style.opacity="1",function(e){e.addEventListener("pointerdown",d),e.addEventListener("pointermove",s),e.addEventListener("pointerup",p),e.addEventListener("pointercancel",p),e.addEventListener("pointerout",p),e.addEventListener("pointerleave",p)}(e),t.style.left=`${.75*a+15}px`}function d(e){o.push(e),i.push(e)}function s(e){const t=f();for(let t=0;t<o.length;t++)if(e.pointerId==o[t].pointerId){o[t]=e;break}if(2===o.length){let e,n,a,u=Math.abs(o[0].clientX-o[1].clientX),d=o[0].clientX-o[1].clientX,s=o[0].clientY-o[1].clientY,p=0;i.length>0&&(e=i[0].x-i[1].x,n=i[0].y-i[1].y,p=180*(a=Math.atan((e*s-n*d)/(e*d+n*s)))/Math.PI),Math.abs(p)>5&&(t.style.webkitFilter=`brightness(${100+p}%)`,document.querySelector(".control-bright").innerText=`Яркость ${Math.round(100+p)}%`),console.log(`currentScale: ${l}, curDiff: ${u}, prevDiff: ${r} `),r>0&&(l+=u-r),l>200&&(l=200),l<50&&(l=50),t.style.backgroundSize=`${l}% ${l}% `,t.style.webkitBackgroundSize=`${l}% ${l}% `,document.querySelector(".control-zoom").innerText=`Приближение ${l}%`,r=u,c.push(o[0]),c.push(o[1])}1===o.length&&(t.style.backgroundPositionX=`${a}%`,i.length>0&&(a+=i[0].x-e.clientX),a<0&&(a=0),a>200&&(a=200),g().style.left=`${.75*a+15}px`)}function p(e){console.log(e.type,e),m(e,o),o.length<2&&(r=-1,m(e,c),m(e,i))}function m(e,t){for(let n=0;n<t.length;n++)if(t[n].pointerId==e.pointerId){t.splice(n,1);break}}function f(){return document.querySelector(".cam")}function g(){return document.querySelector(".cam-slider")}function y(e){const t=document.querySelector(".content");t&&(e.forEach(e=>{const n=function(e){const t=document.querySelector(".template").content.cloneNode(!0);t.querySelector(".tile").classList.add(`${e.size}`),v(t,".type-tile","type",e.type),h(t,".title-tile",e.title),h(t,".source-tile",e.source),"critical"===e.type?b(t,".icon-tile",`url(img/${e.icon}-white.svg)`):b(t,".icon-tile",`url(img/${e.icon}.svg)`),h(t,".time-tile",e.time),e.description&&h(t,".description-tile",e.description);const n=e.data;if(n){const e=t.querySelector(".info-tile");if(e.classList.add("visable"),function(e){return void 0!==e.track}(n)){const e=document.querySelector(".template-audio").content.cloneNode(!0);!function(e,t){null!==e&&(b(e,".cover",`url("${t.albumcover}")`),h(e,".artist",`${t.artist}-${t.track.name}`),h(e,".length",t.track.length),v(e,".track","max",t.track.length),v(e,".track","value",`${t.track.length}/2`),v(e,".volume-range","value",t.volume.toString()),h(e,".volume",`${t.volume}%`))}(e,n);const o=t.querySelector(".data-tile");o.classList.add("data-audio"),o.appendChild(e)}if(function(e){return void 0!==e.type}(n)){const e=document.querySelector(".template-graph").content.cloneNode(!0);!function(e,t){if(null!==e){const t=e.querySelector(".graph");t.style.background=" url('../../img/Richdata.png') no-repeat",t.style.backgroundImage="-webkit-image-set( url('../../img/Richdata.png') 1x, url('../../img/Richdata@2x.png') 2x, url('../../images/Richdata@3x.png') 3x )",t.style.backgroundPosition="center bottom"}}(e);const n=t.querySelector(".data-tile");n.appendChild(e)}if(function(e){return void 0!==e.image}(n)){const e=document.querySelector(".template-image").content.cloneNode(!0),n=function(){const e=document.createElement("div");e.style.background="url('./img/Bitmap.png')",e.style.background="-webkit-image-set( url('../../img/Bitmap.png') 1x, url('../../img/Bitmap2x.png') 2x , url('img/Bitmap3x.png') 3x",e.style.backgroundPosition="50% 50%",e.classList.add("cam");const t=document.createElement("div");return t.classList.add("cam-slider"),e.appendChild(t),e}(),o=function(){const e=document.createElement("div");e.classList.add("control-labels");const t=document.createElement("div");t.classList.add("control-zoom");const n=document.createElement("div");return n.classList.add("control-bright"),t.innerText="Приближение: 78%",n.innerText="Яркость: 50%",e.appendChild(t),e.appendChild(n),e}();e.appendChild(n);const r=t.querySelector(".data-tile");r.classList.add("camera"),r.appendChild(e),r.appendChild(o)}if(function(e){return void 0!==e.buttons}(n)){const e=document.querySelector(".template-buttons").content.cloneNode(!0);n.buttons.forEach(t=>{const n=function(e){const t=document.createElement("div");return t.classList.add("data-button"),t.innerText=e,t}(t),o=e.querySelector(".buttons");o&&o.appendChild(n)});const o=t.querySelector(".data-tile");o.appendChild(e)}}return t}(e);t.appendChild(n)}),u())}function h(e,t,n){const o=e.querySelector(t);return o&&(o.innerText=n),o}function b(e,t,n){const o=e.querySelector(t);o&&(o.style.backgroundImage=n)}function v(e,t,n,o){const r=e.querySelector(t);r&&r.setAttribute(n,o)}fetch("http://localhost:8000/api/events").then(e=>e.json()).then(e=>y(e.events))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hvbWUvY29tcG9uZW50cy90b3VjaEVudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ob21lL2NvbXBvbmVudHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXZDYWNoZSIsInByZXZEaWZmIiwicHJldkNvb3JkIiwic3RhcnRDb29yZCIsImN1cnJlbnRTY2FsZSIsImN1cnJlbnRQb3MiLCJ0b3VjaEV2ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiZWxlbWVudCIsImdldENhbUVsZW0iLCJjYW1TbGlkZXIiLCJnZXRDYW1TbGlkZXIiLCJzdHlsZSIsIm9wYWNpdHkiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwb2ludGVyZG93bl9oYW5kbGVyIiwicG9pbnRlcm1vdmVfaGFuZGxlciIsInBvaW50ZXJ1cF9oYW5kbGVyIiwiaW5pdCIsImxlZnQiLCJldiIsInB1c2giLCJjYW1FbGVtZW50IiwibGVuZ3RoIiwicG9pbnRlcklkIiwiZGlzdFhzdGFydCIsImRpc3RZc3RhcnQiLCJhIiwiY3VyRGlmZiIsIk1hdGgiLCJhYnMiLCJjbGllbnRYIiwiZGlzdFgiLCJkaXN0WSIsImNsaWVudFkiLCJncmFkQSIsIngiLCJ5IiwiYXRhbiIsIlBJIiwid2Via2l0RmlsdGVyIiwiaW5uZXJUZXh0Iiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiYmFja2dyb3VuZFNpemUiLCJ3ZWJraXRCYWNrZ3JvdW5kU2l6ZSIsImJhY2tncm91bmRQb3NpdGlvblgiLCJ0eXBlIiwicmVtb3ZlX2V2ZW50IiwiYXJyIiwic3BsaWNlIiwicmVuZGVyIiwiZXZlbnRzIiwiY29udGVudCIsImZvckVhY2giLCJldmVudCIsImV2ZW50RWxlbWVudCIsInRpbGUiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzaXplIiwic2VhcmNoQW5kU2V0QXR0ciIsInNlYXJjaEVsZW1BbmRJbm5lclRleHQiLCJ0aXRsZSIsInNvdXJjZSIsInNlYXJjaEVsZW1BbmRCZ0ltYWdlIiwiaWNvbiIsInRpbWUiLCJkZXNjcmlwdGlvbiIsImRhdGEiLCJ0aWxlSW5mbyIsImV2ZW50RGF0YSIsInRyYWNrIiwiaXNFdmVudERhdGFBdWRpbyIsImF1ZGlvIiwiYWxidW1jb3ZlciIsImFydGlzdCIsInZvbHVtZSIsInRvU3RyaW5nIiwiZmlsbFRlbXBsYXRlQXVkaW8iLCJkYXRhVGlsZSIsImFwcGVuZENoaWxkIiwiaXNFdmVudERhdGFHcmFwaCIsImdyYXBoIiwiZ3JhcGhOb2RlIiwiYmFja2dyb3VuZCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRQb3NpdGlvbiIsImZpbGxUZW1wbGF0ZUdyYXBoIiwiaW1hZ2UiLCJpc0V2ZW50RGF0YUltYWdlIiwiaW1nRGl2IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUltYWdlRWxlbWVudCIsImxhYmVscyIsImNvbnRyb2xab29tIiwiY29udHJvbEJyaWdodCIsImNyZWF0ZUxhYmVsQ29udHJvbCIsImJ1dHRvbnMiLCJpc0V2ZW50RGF0YUJ1dHRvbnMiLCJidG5zIiwidGV4dEJ0biIsImJ1dHRvbiIsImNyZWF0ZUJ1dHRvbnNFbGVtZW50IiwiY3JlYXRlRXZlbnRFbGVtZW50IiwidGVtcGxhdGVFbGVtZW50Iiwic2VsZWN0b3IiLCJ1cmwiLCJhdHRyTmFtZSIsImF0dHJWYWx1ZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFB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Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQ5KTtcbiIsIi8q0KHQtdC90YHQvtGA0L3Ri9C5INCy0LLQvtC0ICovXG5jb25zdCBldkNhY2hlOiBQb2ludGVyRXZlbnRbXSA9IFtdO1xubGV0IHByZXZEaWZmID0gLTE7XG4vL9C80LDRgdGB0LjQsiDQv9GA0LXQtNGL0LTRg9GJ0LjRhSDQutC+0L7RgNC00LjQvdCw0YJcbmNvbnN0IHByZXZDb29yZDogUG9pbnRlckV2ZW50W10gPSBbXTtcbmNvbnN0IHN0YXJ0Q29vcmQ6IFBvaW50ZXJFdmVudFtdID0gW107XG5sZXQgY3VycmVudFNjYWxlID0gMTAwLFxuICBjdXJyZW50UG9zID0gMTAwO1xuXG5leHBvcnQgZnVuY3Rpb24gdG91Y2hFdmVudCgpIHtcbiAgLy/Qn9C+0LvRg9GH0LDQtdC8INGN0LvQtdC80LXQvdGCIC0g0LrQsNC80LXRgNGLIC0g0LrQsNGA0YLQuNC90LrQuCwg0YfRgtC+0LHRiyDQstGA0LDRidCw0YLRjFxuICBjb25zdCBjYW0gPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYScpO1xuICBjYW0uc2V0QXR0cmlidXRlKCd0b3VjaC1hY3Rpb24nLCAnbm9uZScpO1xuICBjb25zdCBlbGVtZW50ID0gZ2V0Q2FtRWxlbSgpO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndG91Y2gtYWN0aW9uJywgJ25vbmUnKTtcbiAgY29uc3QgY2FtU2xpZGVyID0gZ2V0Q2FtU2xpZGVyKCk7XG4gIGNhbVNsaWRlci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICBpbml0KGVsZW1lbnQpO1xuICBjYW1TbGlkZXIuc3R5bGUubGVmdCA9IGAke2N1cnJlbnRQb3MgKiAwLjc1ICsgMTV9cHhgO1xufVxuXG5mdW5jdGlvbiBpbml0KGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAvL9C90LDQstC10YjQuNCy0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQtdC5INC90LAg0YHQvtCx0YvRgtC40Y9cblxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIHBvaW50ZXJkb3duX2hhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHBvaW50ZXJtb3ZlX2hhbmRsZXIpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBwb2ludGVydXBfaGFuZGxlcik7XG5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHBvaW50ZXJ1cF9oYW5kbGVyKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm91dCcsIHBvaW50ZXJ1cF9oYW5kbGVyKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgcG9pbnRlcnVwX2hhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiBwb2ludGVyZG93bl9oYW5kbGVyKGV2OiBQb2ludGVyRXZlbnQpIHtcbiAgZXZDYWNoZS5wdXNoKGV2KTtcbiAgc3RhcnRDb29yZC5wdXNoKGV2KTtcbn1cblxuZnVuY3Rpb24gcG9pbnRlcm1vdmVfaGFuZGxlcihldjogUG9pbnRlckV2ZW50KSB7XG4gIGNvbnN0IGNhbUVsZW1lbnQgPSBnZXRDYW1FbGVtKCk7XG4gIC8vIEZpbmQgdGhpcyBldmVudCBpbiB0aGUgY2FjaGUgYW5kIHVwZGF0ZSBpdHMgcmVjb3JkIHdpdGggdGhpcyBldmVudFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGV2Q2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXYucG9pbnRlcklkID09IGV2Q2FjaGVbaV0ucG9pbnRlcklkKSB7XG4gICAgICBldkNhY2hlW2ldID0gZXY7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBJZiB0d28gcG9pbnRlcnMgYXJlIGRvd24sIGNoZWNrIGZvciBwaW5jaCBnZXN0dXJlc1xuICBpZiAoZXZDYWNoZS5sZW5ndGggPT09IDIpIHtcbiAgICAvLyDQoNCw0YHRgdGC0L7Rj9C90LjQtSDQvNC10LbQtNGDINC/0LDQu9GM0YbQsNC80Lgg0L/QviDRhVxuICAgIGxldCBjdXJEaWZmID0gTWF0aC5hYnMoZXZDYWNoZVswXS5jbGllbnRYIC0gZXZDYWNoZVsxXS5jbGllbnRYKTtcbiAgICBsZXQgZGlzdFggPSBldkNhY2hlWzBdLmNsaWVudFggLSBldkNhY2hlWzFdLmNsaWVudFg7XG4gICAgbGV0IGRpc3RZID0gZXZDYWNoZVswXS5jbGllbnRZIC0gZXZDYWNoZVsxXS5jbGllbnRZO1xuICAgIGxldCBkaXN0WHN0YXJ0LCBkaXN0WXN0YXJ0O1xuXG4gICAgbGV0IGEsXG4gICAgICBncmFkQSA9IDA7XG4gICAgaWYgKHN0YXJ0Q29vcmQubGVuZ3RoID4gMCkge1xuICAgICAgZGlzdFhzdGFydCA9IHN0YXJ0Q29vcmRbMF0ueCAtIHN0YXJ0Q29vcmRbMV0ueDtcbiAgICAgIGRpc3RZc3RhcnQgPSBzdGFydENvb3JkWzBdLnkgLSBzdGFydENvb3JkWzFdLnk7XG5cbiAgICAgIGEgPSBNYXRoLmF0YW4oKGRpc3RYc3RhcnQgKiBkaXN0WSAtIGRpc3RZc3RhcnQgKiBkaXN0WCkgLyAoZGlzdFhzdGFydCAqIGRpc3RYICsgZGlzdFlzdGFydCAqIGRpc3RZKSk7XG4gICAgICBncmFkQSA9IChhICogMTgwKSAvIE1hdGguUEk7XG4gICAgfVxuXG4gICAgaWYgKE1hdGguYWJzKGdyYWRBKSA+IDUpIHtcbiAgICAgIC8v0LfQvdCw0YfQuNGCINC/0L7QstC+0YDQvtGCXG4gICAgICBjYW1FbGVtZW50LnN0eWxlLndlYmtpdEZpbHRlciA9IGBicmlnaHRuZXNzKCR7MTAwICsgZ3JhZEF9JSlgO1xuICAgICAgLy9lbC5zdHlsZS5maWx0ZXIgPSBgYnJpZ2h0bmVzcygkezEwMCArIGdyYWRBfSUpYDtcbiAgICAgIGdldEJyaWdodEVsZW0oKS5pbm5lclRleHQgPSBg0K/RgNC60L7RgdGC0YwgJHtNYXRoLnJvdW5kKDEwMCArIGdyYWRBKX0lYDtcbiAgICB9XG4gICAge1xuICAgICAgY29uc29sZS5sb2coYGN1cnJlbnRTY2FsZTogJHtjdXJyZW50U2NhbGV9LCBjdXJEaWZmOiAke2N1ckRpZmZ9LCBwcmV2RGlmZjogJHtwcmV2RGlmZn0gYCk7XG5cbiAgICAgIGlmIChwcmV2RGlmZiA+IDApIGN1cnJlbnRTY2FsZSArPSBjdXJEaWZmIC0gcHJldkRpZmY7XG4gICAgICBpZiAoY3VycmVudFNjYWxlID4gMjAwKSBjdXJyZW50U2NhbGUgPSAyMDA7XG4gICAgICBpZiAoY3VycmVudFNjYWxlIDwgNTApIGN1cnJlbnRTY2FsZSA9IDUwO1xuICAgICAgY2FtRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IGAke2N1cnJlbnRTY2FsZX0lICR7Y3VycmVudFNjYWxlfSUgYDtcbiAgICAgIGNhbUVsZW1lbnQuc3R5bGUud2Via2l0QmFja2dyb3VuZFNpemUgPSBgJHtjdXJyZW50U2NhbGV9JSAke2N1cnJlbnRTY2FsZX0lIGA7XG4gICAgICBnZXRab29tRWxlbSgpLmlubmVyVGV4dCA9IGDQn9GA0LjQsdC70LjQttC10L3QuNC1ICR7Y3VycmVudFNjYWxlfSVgO1xuICAgIH1cblxuICAgIC8vINGB0L7RhdGA0LDRj9C90Y/QtdC8INC90LDRh9Cw0LvRjNC90YvQtSDQuCDQv9GA0LXQtNGL0LTRg9GJ0LjQtSDQutC+0L7RgNC00LjQvdCw0YLRi1xuICAgIHByZXZEaWZmID0gY3VyRGlmZjtcbiAgICBwcmV2Q29vcmQucHVzaChldkNhY2hlWzBdKTtcbiAgICBwcmV2Q29vcmQucHVzaChldkNhY2hlWzFdKTtcbiAgfVxuXG4gIGlmIChldkNhY2hlLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vwqDQt9C90LDRh9C40YIg0L/QtdGA0LXQvNC10YnQtdC90LjQtSDQstC70LXQstC+INC40LvQuCDQstC/0YDQsNCy0L4gKHN3aXBlKVxuICAgIGNhbUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWCA9IGAke2N1cnJlbnRQb3N9JWA7XG4gICAgLy9jYW1FbGVtZW50LnN0eWxlLndlYmtpdEJhY2tncm91bmRQb3NpdGlvblggPSBgJHtjdXJyZW50UG9zfSVgO1xuXG4gICAgaWYgKHN0YXJ0Q29vcmQubGVuZ3RoID4gMCkge1xuICAgICAgY3VycmVudFBvcyArPSBzdGFydENvb3JkWzBdLnggLSBldi5jbGllbnRYO1xuICAgIH1cbiAgICBpZiAoY3VycmVudFBvcyA8IDApIGN1cnJlbnRQb3MgPSAwO1xuICAgIGlmIChjdXJyZW50UG9zID4gMjAwKSBjdXJyZW50UG9zID0gMjAwO1xuICAgIGdldENhbVNsaWRlcigpLnN0eWxlLmxlZnQgPSBgJHtjdXJyZW50UG9zICogMC43NSArIDE1fXB4YDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2ludGVydXBfaGFuZGxlcihldjogUG9pbnRlckV2ZW50KSB7XG4gIGNvbnNvbGUubG9nKGV2LnR5cGUsIGV2KTtcbiAgLy8g0KPQtNCw0LvQtdC90LjQtSDQv9GA0LXQtNGL0LTRg9GJ0LjRhSDQuCDQvdCw0YfQsNC70YzQvdGL0YUg0LrQvtC+0YDQtNC40L3QsNGCXG4gIHJlbW92ZV9ldmVudChldiwgZXZDYWNoZSk7XG5cbiAgaWYgKGV2Q2FjaGUubGVuZ3RoIDwgMikge1xuICAgIHByZXZEaWZmID0gLTE7XG4gICAgLy/Qo9C00LDQu9GP0LXQvCDRgdGC0LDRgNGC0L7QstGL0LUg0LrQvtC+0YDQtNC40L3QsNGC0YtcbiAgICByZW1vdmVfZXZlbnQoZXYsIHByZXZDb29yZCk7XG4gICAgcmVtb3ZlX2V2ZW50KGV2LCBzdGFydENvb3JkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVfZXZlbnQoZXY6IFBvaW50ZXJFdmVudCwgYXJyOiBQb2ludGVyRXZlbnRbXSkge1xuICAvLyBSZW1vdmUgdGhpcyBldmVudCBmcm9tIHRoZSB0YXJnZXQncyBjYWNoZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJbaV0ucG9pbnRlcklkID09IGV2LnBvaW50ZXJJZCkge1xuICAgICAgYXJyLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDYW1FbGVtKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgZWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtJyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBnZXRCcmlnaHRFbGVtKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgZWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbC1icmlnaHQnKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGdldFpvb21FbGVtKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgZWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbC16b29tJyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBnZXRDYW1TbGlkZXIoKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBjYW1TbGlkZXIgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbS1zbGlkZXInKTtcbiAgcmV0dXJuIGNhbVNsaWRlcjtcbn1cbiIsImltcG9ydCAqIGFzIHRvdWNoRXZlbnRzIGZyb20gJy4vdG91Y2hFbnRlcic7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoZXZlbnRzOiBEZXZpY2VFdmVudFtdKTogdm9pZCB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuICBpZiAoY29udGVudCkge1xuICAgIGV2ZW50cy5mb3JFYWNoKFxuICAgICAgKGV2ZW50OiBEZXZpY2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBldmVudEVsZW1lbnQgPSBjcmVhdGVFdmVudEVsZW1lbnQoZXZlbnQpO1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGV2ZW50RWxlbWVudCk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0b3VjaEV2ZW50cy50b3VjaEV2ZW50KCk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIERldmljZUV2ZW50IHtcbiAgdHlwZTogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBzb3VyY2U6IHN0cmluZztcbiAgdGltZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogbnVsbCB8IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICBkYXRhOiBFdmVudERhdGEgfCB1bmRlZmluZWQ7XG4gIHNpemU6IEV2ZW50U2l6ZTtcbn1cblxudHlwZSBFdmVudERhdGEgPSBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zO1xuXG50eXBlIEV2ZW50U2l6ZSA9ICdzJyB8ICdtJyB8ICdsJztcblxuaW50ZXJmYWNlIEV2ZW50RGF0YUF1ZGlvIHtcbiAgYWxidW1jb3Zlcjogc3RyaW5nO1xuICBhcnRpc3Q6IHN0cmluZztcbiAgdHJhY2s6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgbGVuZ3RoOiBzdHJpbmc7XG4gIH07XG4gIHZvbHVtZTogbnVtYmVyO1xufVxuaW50ZXJmYWNlIEV2ZW50RGF0YUdyYXBoIHtcbiAgdHlwZTogJ2dyYXBoJztcbiAgdmFsdWVzOiBvYmplY3RbXTtcbn1cbmludGVyZmFjZSBFdmVudERhdGFJbWFnZSB7XG4gIGltYWdlOiBzdHJpbmc7XG59XG5pbnRlcmZhY2UgRXZlbnREYXRhQnV0dG9ucyB7XG4gIGJ1dHRvbnM6IHN0cmluZ1tdO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFdmVudEVsZW1lbnQoZXZlbnQ6IERldmljZUV2ZW50KSB7XG4gIGNvbnN0IHRpbGUgPSA8SFRNTERpdkVsZW1lbnQ+KDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZScpKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCB0aWxlU2l6ZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy50aWxlJyk7XG4gIHRpbGVTaXplLmNsYXNzTGlzdC5hZGQoYCR7ZXZlbnQuc2l6ZX1gKTtcbiAgc2VhcmNoQW5kU2V0QXR0cih0aWxlLCAnLnR5cGUtdGlsZScsICd0eXBlJywgZXZlbnQudHlwZSk7XG4gIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGlsZSwgJy50aXRsZS10aWxlJywgZXZlbnQudGl0bGUpO1xuICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KHRpbGUsICcuc291cmNlLXRpbGUnLCBldmVudC5zb3VyY2UpO1xuICBldmVudC50eXBlID09PSAnY3JpdGljYWwnXG4gICAgPyBzZWFyY2hFbGVtQW5kQmdJbWFnZSh0aWxlLCAnLmljb24tdGlsZScsIGB1cmwoaW1nLyR7ZXZlbnQuaWNvbn0td2hpdGUuc3ZnKWApXG4gICAgOiBzZWFyY2hFbGVtQW5kQmdJbWFnZSh0aWxlLCAnLmljb24tdGlsZScsIGB1cmwoaW1nLyR7ZXZlbnQuaWNvbn0uc3ZnKWApO1xuICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KHRpbGUsICcudGltZS10aWxlJywgZXZlbnQudGltZSk7XG5cbiAgaWYgKGV2ZW50LmRlc2NyaXB0aW9uKSB7XG4gICAgc2VhcmNoRWxlbUFuZElubmVyVGV4dCh0aWxlLCAnLmRlc2NyaXB0aW9uLXRpbGUnLCBldmVudC5kZXNjcmlwdGlvbik7XG4gIH1cblxuICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgaWYgKGRhdGEpIHtcbiAgICAvL9CV0YHQu9C4INC10YHRgtGMIGRhdGEsINC00L7QsdCw0LLQu9GP0LXQvCDQutC70LDRgdGBIHZpc2FibGUg0Y3Qu9C10LzQtdC90YLRgyBpbmZvLXRpbGVcbiAgICBjb25zdCB0aWxlSW5mbyA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5pbmZvLXRpbGUnKTtcbiAgICAvL2lmICh0aWxlSW5mbykge1xuICAgIHRpbGVJbmZvLmNsYXNzTGlzdC5hZGQoJ3Zpc2FibGUnKTtcbiAgICAvL31cblxuICAgIC8v0JXRgdC70Lgg0L3QsNGI0LvQuCDRgtGA0LXQuiwg0YLQviDQuNGB0L/QvtC70YzQt9GD0LXQvCDRiNCw0LHQu9C+0L0g0LDRg9C00LjQvlxuICAgIGlmIChpc0V2ZW50RGF0YUF1ZGlvKGRhdGEpKSB7XG4gICAgICBjb25zdCBhdWRpbyA9IDxIVE1MRGl2RWxlbWVudD4oXG4gICAgICAgICg8SFRNTFRlbXBsYXRlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGxhdGUtYXVkaW8nKSkuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICk7XG4gICAgICBmaWxsVGVtcGxhdGVBdWRpbyhhdWRpbywgZGF0YSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIC8vaWYgKGRhdGFUaWxlKSB7XG4gICAgICBkYXRhVGlsZS5jbGFzc0xpc3QuYWRkKCdkYXRhLWF1ZGlvJyk7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChhdWRpbyk7XG4gICAgICAvL31cbiAgICB9XG5cbiAgICAvL9Cd0LDRiNC70Lgg0YLQuNC/INCz0YDQsNGEXG4gICAgaWYgKGlzRXZlbnREYXRhR3JhcGgoZGF0YSkpIHtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC60LDRgNGC0LjQvdC60YMt0LfQsNCz0LvRg9GI0LrRg1xuICAgICAgY29uc3QgZ3JhcGggPSA8SFRNTERpdkVsZW1lbnQ+KFxuICAgICAgICAoPEhUTUxUZW1wbGF0ZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBsYXRlLWdyYXBoJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZmlsbFRlbXBsYXRlR3JhcGgoZ3JhcGgsIGRhdGEpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICAvL2lmIChkYXRhVGlsZSkge1xuICAgICAgZGF0YVRpbGUuYXBwZW5kQ2hpbGQoZ3JhcGgpO1xuICAgICAgLy99XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQuNC30L7QsdGA0LDQttC10L3QuNC1XG4gICAgaWYgKGlzRXZlbnREYXRhSW1hZ2UoZGF0YSkpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1pbWFnZScpKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxuICAgICAgKTtcbiAgICAgIC8v0LLRgdGC0LDQstC70Y/QtdC8INC30LDQs9C70YPRiNC60YMg0LLQvNC10YHRgtC+IFwiZ2V0X2l0X2Zyb21fbW9ja3NfOjMuanBnXCJcbiAgICAgIGNvbnN0IGltZ0RpdiA9IGNyZWF0ZUltYWdlRWxlbWVudCgpO1xuICAgICAgY29uc3QgbGFiZWxzID0gY3JlYXRlTGFiZWxDb250cm9sKCk7XG4gICAgICBpbWFnZS5hcHBlbmRDaGlsZChpbWdEaXYpO1xuICAgICAgY29uc3QgZGF0YVRpbGUgPSA8SFRNTEVsZW1lbnQ+dGlsZS5xdWVyeVNlbGVjdG9yKCcuZGF0YS10aWxlJyk7XG4gICAgICAvL2lmIChkYXRhVGlsZSkge1xuICAgICAgZGF0YVRpbGUuY2xhc3NMaXN0LmFkZCgnY2FtZXJhJyk7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChpbWFnZSk7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChsYWJlbHMpO1xuICAgICAgLy99XG4gICAgfVxuICAgIC8v0J3QsNGI0LvQuCDQutC90L7Qv9C60LhcbiAgICBpZiAoaXNFdmVudERhdGFCdXR0b25zKGRhdGEpKSB7XG4gICAgICBjb25zdCBidG5zID0gPEhUTUxEaXZFbGVtZW50PihcbiAgICAgICAgKDxIVE1MVGVtcGxhdGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wbGF0ZS1idXR0b25zJykpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICApO1xuICAgICAgZGF0YS5idXR0b25zLmZvckVhY2godGV4dEJ0biA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbnNFbGVtZW50KHRleHRCdG4pO1xuICAgICAgICBjb25zdCBidXR0b25zID0gYnRucy5xdWVyeVNlbGVjdG9yKCcuYnV0dG9ucycpO1xuICAgICAgICBpZiAoYnV0dG9ucykge1xuICAgICAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhVGlsZSA9IDxIVE1MRWxlbWVudD50aWxlLnF1ZXJ5U2VsZWN0b3IoJy5kYXRhLXRpbGUnKTtcbiAgICAgIC8vaWYgKGRhdGFUaWxlKSB7XG4gICAgICBkYXRhVGlsZS5hcHBlbmRDaGlsZChidG5zKTtcbiAgICAgIC8vfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGlsZTtcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFBdWRpbyhldmVudERhdGE6IEV2ZW50RGF0YSk6IGV2ZW50RGF0YSBpcyBFdmVudERhdGFBdWRpbyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFBdWRpbz5ldmVudERhdGEpLnRyYWNrICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFHcmFwaChcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhR3JhcGgge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhR3JhcGg+ZXZlbnREYXRhKS50eXBlICE9PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudERhdGFJbWFnZShcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhSW1hZ2Uge1xuICByZXR1cm4gdHlwZW9mICg8RXZlbnREYXRhSW1hZ2U+ZXZlbnREYXRhKS5pbWFnZSAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIGlzRXZlbnREYXRhQnV0dG9ucyhcbiAgZXZlbnREYXRhOiBvYmplY3QgfCBFdmVudERhdGFBdWRpbyB8IEV2ZW50RGF0YUdyYXBoIHwgRXZlbnREYXRhSW1hZ2UgfCBFdmVudERhdGFCdXR0b25zXG4pOiBldmVudERhdGEgaXMgRXZlbnREYXRhQnV0dG9ucyB7XG4gIHJldHVybiB0eXBlb2YgKDxFdmVudERhdGFCdXR0b25zPmV2ZW50RGF0YSkuYnV0dG9ucyAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEVsZW1BbmRJbm5lclRleHQodGVtcGxhdGVFbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgc2VsZWN0b3I6IHN0cmluZywgaW5uZXJUZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+dGVtcGxhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gaW5uZXJUZXh0O1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBzZWFyY2hFbGVtQW5kQmdJbWFnZSh0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSB1cmw7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VhcmNoQW5kU2V0QXR0cih0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nLCBhdHRyTmFtZTogc3RyaW5nLCBhdHRyVmFsdWU6IHN0cmluZykge1xuICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbFRlbXBsYXRlQXVkaW8oYXVkaW86IEhUTUxEaXZFbGVtZW50LCBkYXRhOiBFdmVudERhdGFBdWRpbyk6IHZvaWQge1xuICBpZiAoYXVkaW8gIT09IG51bGwpIHtcbiAgICBzZWFyY2hFbGVtQW5kQmdJbWFnZShhdWRpbywgJy5jb3ZlcicsIGB1cmwoXCIke2RhdGEuYWxidW1jb3Zlcn1cIilgKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmFydGlzdCcsIGAke2RhdGEuYXJ0aXN0fS0ke2RhdGEudHJhY2submFtZX1gKTtcbiAgICBzZWFyY2hFbGVtQW5kSW5uZXJUZXh0KGF1ZGlvLCAnLmxlbmd0aCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ21heCcsIGRhdGEudHJhY2subGVuZ3RoKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnRyYWNrJywgJ3ZhbHVlJywgYCR7ZGF0YS50cmFjay5sZW5ndGh9LzJgKTtcbiAgICBzZWFyY2hBbmRTZXRBdHRyKGF1ZGlvLCAnLnZvbHVtZS1yYW5nZScsICd2YWx1ZScsIGRhdGEudm9sdW1lLnRvU3RyaW5nKCkpO1xuICAgIHNlYXJjaEVsZW1BbmRJbm5lclRleHQoYXVkaW8sICcudm9sdW1lJywgYCR7ZGF0YS52b2x1bWV9JWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbGxUZW1wbGF0ZUdyYXBoKGdyYXBoOiBIVE1MRGl2RWxlbWVudCwgZGF0YTogRXZlbnREYXRhR3JhcGgpOiB2b2lkIHtcbiAgaWYgKGdyYXBoICE9PSBudWxsKSB7XG4gICAgY29uc3QgZ3JhcGhOb2RlOiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD5ncmFwaC5xdWVyeVNlbGVjdG9yKCcuZ3JhcGgnKTtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZCA9IGAgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGEucG5nJykgbm8tcmVwZWF0YDtcbiAgICBncmFwaE5vZGUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYC13ZWJraXQtaW1hZ2Utc2V0KCB1cmwoJy4uLy4uL2ltZy9SaWNoZGF0YS5wbmcnKSAxeCwgdXJsKCcuLi8uLi9pbWcvUmljaGRhdGFAMngucG5nJykgMngsIHVybCgnLi4vLi4vaW1hZ2VzL1JpY2hkYXRhQDN4LnBuZycpIDN4IClgO1xuICAgIGdyYXBoTm9kZS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBgY2VudGVyIGJvdHRvbWA7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlSW1hZ2VFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgLy/QstGB0YLQsNCy0LvRj9C10Lwg0LfQsNCz0LvRg9GI0LrRgyDQstC80LXRgdGC0L4gXCJnZXRfaXRfZnJvbV9tb2Nrc186My5qcGdcIlxuICBjb25zdCBpbWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCcuL2ltZy9CaXRtYXAucG5nJylgO1xuICBpbWdEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGAtd2Via2l0LWltYWdlLXNldCggdXJsKCcuLi8uLi9pbWcvQml0bWFwLnBuZycpIDF4LCB1cmwoJy4uLy4uL2ltZy9CaXRtYXAyeC5wbmcnKSAyeCAsIHVybCgnaW1nL0JpdG1hcDN4LnBuZycpIDN4YDtcbiAgaW1nRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IGA1MCUgNTAlYDtcbiAgaW1nRGl2LmNsYXNzTGlzdC5hZGQoJ2NhbScpO1xuICBjb25zdCBjYW1TbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2FtU2xpZGVyLmNsYXNzTGlzdC5hZGQoYGNhbS1zbGlkZXJgKTtcbiAgaW1nRGl2LmFwcGVuZENoaWxkKGNhbVNsaWRlcik7XG4gIHJldHVybiBpbWdEaXY7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxhYmVsQ29udHJvbCgpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBsYWJlbHMuY2xhc3NMaXN0LmFkZCgnY29udHJvbC1sYWJlbHMnKTtcbiAgY29uc3QgY29udHJvbFpvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbFpvb20uY2xhc3NMaXN0LmFkZCgnY29udHJvbC16b29tJyk7XG4gIGNvbnN0IGNvbnRyb2xCcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udHJvbEJyaWdodC5jbGFzc0xpc3QuYWRkKCdjb250cm9sLWJyaWdodCcpO1xuICBjb250cm9sWm9vbS5pbm5lclRleHQgPSBg0J/RgNC40LHQu9C40LbQtdC90LjQtTogNzglYDtcbiAgY29udHJvbEJyaWdodC5pbm5lclRleHQgPSBg0K/RgNC60L7RgdGC0Yw6IDUwJWA7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sWm9vbSk7XG4gIGxhYmVscy5hcHBlbmRDaGlsZChjb250cm9sQnJpZ2h0KTtcbiAgcmV0dXJuIGxhYmVscztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9uc0VsZW1lbnQodGV4dEJ0bjogc3RyaW5nKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RhdGEtYnV0dG9uJyk7XG4gIGJ1dHRvbi5pbm5lclRleHQgPSB0ZXh0QnRuO1xuICByZXR1cm4gYnV0dG9uO1xufVxuIiwiaW1wb3J0ICogYXMgcmVuZGVyRXZlbnRzIGZyb20gJy4vaG9tZS9jb21wb25lbnRzL2luZGV4JztcblxuY29uc3QgdXJsSlNPTiA9ICdodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2V2ZW50cyc7XG5cbmZldGNoKHVybEpTT04pXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAudGhlbihkYXRhID0+IHJlbmRlckV2ZW50cy5yZW5kZXIoZGF0YS5ldmVudHMpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=